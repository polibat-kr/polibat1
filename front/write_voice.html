<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="polibat Website Template by freehtml5.co" />
  <meta name="keywords" content="free website templates, polibat, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
  <meta name="author" content="freehtml5.co" />

  <!-- Facebook and Twitter integration -->
  <meta property="og:title" content=""/>
  <meta property="og:image" content=""/>
  <meta property="og:url" content=""/>
  <meta property="og:site_name" content=""/>
  <meta property="og:description" content=""/>
  <meta name="twitter:title" content="" />
  <meta name="twitter:image" content="" />
  <meta name="twitter:url" content="" />
  <meta name="twitter:card" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:300,400" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic" rel="stylesheet">

  <!-- Animate.css -->
  <link rel="stylesheet" href="css/animate.css">
  <!-- Icomoon Icon Fonts-->
  <link rel="stylesheet" href="css/icomoon.css">
  <!-- Bootstrap  -->
  <link rel="stylesheet" href="css/bootstrap.css">

  <!-- Magnific Popup -->
  <link rel="stylesheet" href="css/magnific-popup.css">

  <!-- Owl Carousel  -->
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">

  <!-- Flexslider  -->
  <link rel="stylesheet" href="css/flexslider.css">

  <!-- Pricing -->
  <link rel="stylesheet" href="css/pricing.css">

  <!-- Theme style  -->
  <link rel="stylesheet" href="css/style.css">

  <!-- Modernizr JS -->
  <script src="js/modernizr-2.6.2.min.js"></script>

  <!-- Toast UI Editor Ïä§ÌÉÄÏùº Î∞è Ïä§ÌÅ¨Î¶ΩÌä∏ Ï∂îÍ∞Ä -->
  <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css">
  <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
  <script src="https://uicdn.toast.com/editor/latest/i18n/ko.js"></script>

  <!-- FOR IE9 below -->
  <!--[if lt IE 9]>
  <script src="js/respond.min.js"></script>
  <![endif]-->
  <title>Ï†ïÏπòÏù∏Í≤åÏãúÌåê - Í∏ÄÏì∞Í∏∞</title>
  <style>
    .board-container {
      max-width: 1200px;
      margin: auto;
      background: #fff;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      width: 100%;
       margin: 40px auto 30px;
    }
    
    .login-required-message {
      text-align: center;
      padding: 60px 20px;
      color: #666;
      background: #f8f9fa;
      border-radius: 12px;
      margin: 40px auto;
    }
    
    .login-required-message h3 {
      color: #333;
      margin-bottom: 16px;
    }
    
    .login-button {
      display: inline-block;
      padding: 12px 24px;
      background-color: #000;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      margin-top: 16px;
      transition: background-color 0.3s;
    }
    
    .login-button:hover {
      background-color: #333;
      text-decoration: none;
      color: white;
    }
    
    h2 {
      margin-top: 0;
      font-size: 1.8em;
      margin-bottom: 10px;
    }
    
    p.description {
      color: #666;
      font-size: 0.95em;
      margin-bottom: 24px;
    }
    
    label {
      display: block;
      margin: 12px 0 6px;
      font-weight: bold;
    }
    
    input[type="text"],
    textarea,
    select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-sizing: border-box;
      font-size: 14px;
    }
    
    input:focus,
    textarea:focus,
    select:focus {
      border-color: #007bff;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.15);
    }
    
    textarea {
      resize: vertical;
      min-height: 180px;
    }
    
    .form-actions {
      margin-top: 20px;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }
    
    .write-button {
      padding: 10px 20px;
      background-color: #000;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .write-button:hover {
      background-color: #333;
    }
    
    .cancel-button {
      background-color: #6c757d;
      color: white;
    }
    
    .cancel-button:hover {
      background-color: #5a6268;
    }

    /* Ï†ïÏπòÏù∏ ÏÑ†ÌÉù ÏÑπÏÖò */
    .politician-section {
      background: #f8f9fa;
      padding: 16px;
      border-radius: 8px;
      margin: 16px 0;
    }

    .politician-section label {
      color: #333;
      font-size: 14px;
      margin-bottom: 8px;
      font-weight: bold;
    }

    .politician-search-wrapper {
      position: relative;
      margin-bottom: 7px;
    }

    .politician-search {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
      background: white;
      color: #333;
      box-sizing: border-box;
    }

    .politician-search:focus {
      border-color: #007bff;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.15);
    }

    .politician-dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      max-height: 300px;
      overflow-y: auto;
      z-index: 10;
      margin-top: 4px;
    }

    .politician-item {
      display: flex;
      align-items: center;
      padding: 8px 12px;
      cursor: pointer;
      border-bottom: 1px solid #f0f0f0;
      transition: background-color 0.2s;
    }

    .politician-item:hover {
      background-color: #f8f9fa;
    }

    .politician-item:last-child {
      border-bottom: none;
    }

    /* ==================== Ï†ïÏπòÏù∏ Î™ÖÌï® Ïπ¥Îìú Ìèº Ïä§ÌÉÄÏùº ==================== */
    
    .politician-card-section {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border: 1px solid #dee2e6;
      border-radius: 12px;
      padding: 24px;
      margin: 20px 0;
      position: relative;
      overflow: hidden;
    }

    .politician-card-section::before {
      content: "üèõÔ∏è";
      position: absolute;
      top: 16px;
      right: 20px;
      font-size: 24px;
      opacity: 0.1;
    }

    .politician-card-section h3 {
      color: #1a1a1a;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-description {
      color: #666;
      font-size: 14px;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .politician-card-form {
      background: white;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e9ecef;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-row:last-child {
      margin-bottom: 0;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      font-weight: 600;
      color: #495057;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      padding: 10px 12px;
      border: 1px solid #ced4da;
      border-radius: 6px;
      font-size: 14px;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
      background: white;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #4a90e2;
      box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
    }

    .form-group small {
      color: #6c757d;
      font-size: 12px;
      margin-top: 4px;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 60px;
    }

    /* Î™®Î∞îÏùº Î∞òÏùëÌòï */
    @media (max-width: 768px) {
      .form-row {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .politician-card-section {
        padding: 20px;
        margin: 16px 0;
      }

      .politician-card-form {
        padding: 16px;
      }
    }

    .politician-photo {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 10px;
      border: 2px solid #e9ecef;
      flex-shrink: 0;
    }

    .politician-info {
      flex: 1;
      min-width: 0;
    }

    .politician-name {
      font-weight: bold;
      color: #333;
      font-size: 13px;
      margin-bottom: 2px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .politician-party {
      color: #666;
      font-size: 11px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .politician-position {
      color: #888;
      font-size: 10px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .selected-politician {
      display: flex;
      align-items: center;
      background: white;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }

    .selected-politician-photo {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 16px;
      border: 2px solid #e9ecef;
    }

    .selected-politician-info {
      flex: 1;
    }

    .selected-politician-name {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 4px;
      color: #333;
    }

    .selected-politician-details {
      font-size: 13px;
      color: #666;
    }

    .change-politician-btn {
      background: #6c757d;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .change-politician-btn:hover {
      background: #5a6268;
    }

    .politician-notice {
      font-size: 12px;
    }
    
    /* Ï†ïÏπòÏù∏ ÌöåÏõêÏö© ÎπÑÌôúÏÑ±Ìôî Ïä§ÌÉÄÏùº */
    .politician-disabled {
      opacity: 0.6;
      background: #f8f9fa !important;
      border: 1px solid #dee2e6 !important;
      cursor: not-allowed;
    }
    
    .disabled-indicator {
      background: #6c757d;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: bold;
      margin-left: 12px;
    }
    
    .politician-disabled-notice {
      color: #6c757d;
      background: #f8f9fa;
      padding: 8px 0px;
      border-radius: 6px;
    }

    .no-politician-option {
      padding: 12px 16px;
      text-align: center;
      color: #666;
      font-style: italic;
      border-bottom: 1px solid #f0f0f0;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .no-politician-option:hover {
      background-color: #f8f9fa;
    }
    
    .district-section {
      background: #f8f9fa;
      padding: 16px;
      border-radius: 8px;
      margin: 16px 0;
    }
    
    .district-visibility-section {
      margin-top: 12px;
      padding-top: 12px;
    }
    
    .visibility-options {
      display: flex;
      flex-direction: row;
      gap: 16px;
      margin-top: 6px;
    }
    
    .radio-option {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border: 1px solid #e9ecef;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      background: white;
      margin: 0 !important;
      font-weight: normal !important;
      flex: 1;
      justify-content: center;
    }
    
    .radio-option:hover {
      border-color: #007bff;
      background: #f8f9ff;
    }
    
    .radio-option input[type="radio"] {
      display: none;
    }
    
    .radio-custom {
      width: 16px;
      height: 16px;
      border: 2px solid #dee2e6;
      border-radius: 50%;
      background: white;
      position: relative;
      flex-shrink: 0;
    }
    
    .radio-option input[type="radio"]:checked + .radio-custom {
      border-color: #007bff;
      background: #007bff;
    }
    
    .radio-option input[type="radio"]:checked + .radio-custom::after {
      content: '';
      width: 6px;
      height: 6px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    .radio-option input[type="radio"]:checked ~ .option-text strong {
      color: #007bff;
    }
    
    .option-text strong {
      font-size: 13px;
      color: #333;
      transition: color 0.2s ease;
    }
    
    .visibility-help {
      display: block;
      margin-top: 8px;
      color: #666;
      font-size: 12px;
      line-height: 1.4;
    }
    
    .autocomplete-wrapper {
      position: relative;
    }

    .autocomplete-items {
      position: absolute;
      background: white;
      max-height: 200px;
      overflow-y: auto;
      border-radius: 6px;
      z-index: 10;
      width: 100%;
      margin-top: 4px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .autocomplete-item {
      padding: 10px;
      cursor: pointer;
      border-bottom: 1px solid #eee;
    }

    .autocomplete-item:hover {
      background-color: #f1f1f1;
    }
    
    .autocomplete-item:last-child {
      border-bottom: none;
    }
    
    @media (max-width: 768px) {
      .board-container {
        margin: 20px 16px 15px 16px;
        padding-left: 16px;
        padding-right: 16px;
      }
      .form-actions {
        flex-direction: column;
        align-items: stretch;
      }
      .write-button {
        width: 100%;
      }
      
      .selected-politician {
        flex-direction: column;
        text-align: center;
      }
      
      .selected-politician-photo {
        margin-right: 0;
        margin-bottom: 12px;
      }
    }
    
    .toastui-editor-defaultUI {
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      margin-bottom: 20px;
    }
    
    /* ÌïòÎã® ÏÇ¨ÏßÑ Ï≤®Î∂Ä Ïà®ÍπÄ */
    #drop-area,
    #imagePreview,
    label[for="imageInput"] {
      display: none !important;
    }
  </style>
</head>
<body>
  <!-- Ìó§Îçî Î°úÎî© -->
  <div id="header-include"></div>
  
  <div id="wrap"> 
    <div class="board-container">
      <!-- Í∏ÄÏì∞Í∏∞ Ìèº -->
      <div id="writeFormContainer">
          <h2>Ï†ïÏπòÏù∏Í≤åÏãúÌåê Í∏ÄÏì∞Í∏∞</h2>
          <p class="description">ÏÜåÌÜµÌïòÍ≥† Ïã∂ÏùÄ ÎÇ¥Ïö©ÏùÑ ÏûêÏú†Î°≠Í≤å ÏûëÏÑ±Ìï¥Î≥¥ÏÑ∏Ïöî. Í≤åÏãúÍ∏ÄÏùÄ Îì±Î°ù ÌõÑ Ï†ïÏπòÏù∏Í≤åÏãúÌåêÏóê ÌëúÏãúÎê©ÎãàÎã§.</p>
          
          <form id="writeForm">
            <!-- ÏÜåÌÜµÎåÄÏÉÅ Ï†ïÏπòÏù∏ ÏÑ†ÌÉù -->
            <div class="politician-section">
              <label for="politicianSearch">ÏÜåÌÜµÎåÄÏÉÅ Ï†ïÏπòÏù∏ ÏÑ†ÌÉù <span style="font-weight: normal; color: #999;">(ÏÑ†ÌÉùÏÇ¨Ìï≠)</span></label>
              
              <!-- ÏùºÎ∞òÌöåÏõê/Î≥¥Ï¢åÏßÑÌöåÏõêÏö© ÏÑ†ÌÉù Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ -->
              <div id="normalUserInterface">
                <div id="politicianSearchContainer">
                  <div class="politician-search-wrapper">
                    <input type="text" id="politicianSearch" class="politician-search" 
                           placeholder="Ï†ïÏπòÏù∏ Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÍ±∞ÎÇò Í≤ÄÏÉâÌïòÏÑ∏Ïöî (ÌÅ¥Î¶≠ÌïòÎ©¥ Î™©Î°ùÏù¥ ÎÇòÌÉÄÎÇ©ÎãàÎã§)" autocomplete="off">
                    <div id="politicianDropdown" class="politician-dropdown" style="display: none;"></div>
                  </div>
                </div>
                
                <div id="selectedPoliticianContainer" style="display: none;">
                  <div class="selected-politician">
                    <img id="selectedPoliticianPhoto" class="selected-politician-photo" src="" alt="">
                    <div class="selected-politician-info">
                      <div id="selectedPoliticianName" class="selected-politician-name"></div>
                      <div id="selectedPoliticianDetails" class="selectedPolitician-details"></div>
                    </div>
                    <button type="button" class="change-politician-btn" onclick="changePolitician()">Î≥ÄÍ≤Ω</button>
                  </div>
                </div>
                
                <div class="politician-notice">
                  ‚Äª ÏÜåÌÜµÎåÄÏÉÅ Ï†ïÏπòÏù∏ ÏÇ¨ÏßÑÏù¥ Í≤åÏãúÍ∏ÄÏóê Ìï®Íªò ÌëúÏãúÎê©ÎãàÎã§.
                </div>
              </div>
              
              <!-- Ï†ïÏπòÏù∏ÌöåÏõêÏö© ÏûêÎèôÏÑ†ÌÉù Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ -->
              <div id="politicianUserInterface" style="display: none;">
                <div class="selected-politician politician-disabled">
                  <img id="autoSelectedPoliticianPhoto" class="selected-politician-photo" src="" alt="">
                  <div class="selected-politician-info">
                    <div id="autoSelectedPoliticianName" class="selected-politician-name"></div>
                    <div id="autoSelectedPoliticianDetails" class="selected-politician-details"></div>
                  </div>
                  <div class="disabled-indicator">ÏûêÎèô ÏÑ§Ï†ï</div>
                </div>
                
                <div class="politician-notice politician-disabled-notice">
                  ‚Äª Ï†ïÏπòÏù∏ Í≥ÑÏ†ïÏùÄ ÏÜåÌÜµÎåÄÏÉÅÏùÑ ÏÑ†ÌÉùÌï† Ïàò ÏóÜÏäµÎãàÎã§. (Î≥∏Ïù∏ÏúºÎ°ú ÏûêÎèô ÏÑ§Ï†ïÎê©ÎãàÎã§)
                </div>
              </div>
              
              <input type="hidden" id="selectedPoliticianId" name="politicianId">
            </div>

            <!-- ÏßÄÏó≠Íµ¨ ÏÑ†ÌÉù Î∞è Í≥µÍ∞ú/ÎπÑÍ≥µÍ∞ú ÏÑ§Ï†ï -->
            <div class="district-section d0">
              <label for="district">ÏßÄÏó≠Íµ¨ ÏÑ†ÌÉù</label>
              <div class="autocomplete-wrapper" style="position: relative; margin-bottom: 12px;">
                <input type="text" id="district" placeholder="ÏßÄÏó≠Íµ¨Î•º Í≤ÄÏÉâÌïòÏÑ∏Ïöî" autocomplete="off" required>
                <div id="autocomplete-list" class="autocomplete-items"></div>
              </div>
              <div class="district-visibility-section">
                <label style="margin: 8px 0 6px; font-weight: bold;">ÏßÄÏó≠Íµ¨ Í≥µÍ∞ú ÏÑ§Ï†ï</label>
                <div class="visibility-options">
                  <label class="radio-option">
                    <input type="radio" name="districtVisibility" value="public" checked>
                    <span class="radio-custom"></span>
                    <span class="option-text">
                      <strong>Í≥µÍ∞ú</strong>
                    </span>
                  </label>
                  <label class="radio-option">
                    <input type="radio" name="districtVisibility" value="private">
                    <span class="radio-custom"></span>
                    <span class="option-text">
                      <strong>ÎπÑÍ≥µÍ∞ú</strong>
                    </span>
                  </label>
                </div>
                <small class="visibility-help">Í≥µÍ∞ú: Îã§Î•∏ ÏÇ¨Ïö©ÏûêÎì§Ïù¥ ÎÇ¥ ÏßÄÏó≠Íµ¨Î•º Î≥º Ïàò ÏûàÏäµÎãàÎã§ | ÎπÑÍ≥µÍ∞ú: ÏßÄÏó≠Íµ¨ Ï†ïÎ≥¥Í∞Ä ÌëúÏãúÎêòÏßÄ ÏïäÏäµÎãàÎã§</small>
              </div>
            </div>
            
            <label for="title">Ï†úÎ™©</label>
            <input type="text" id="title" placeholder="Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>

            <label for="editor">ÎÇ¥Ïö©</label>
            <div id="editor"></div>
            <input type="hidden" id="hiddenContent" name="content">

            <!-- Ïà®Í≤®ÏßÑ Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú ÏòÅÏó≠ -->
            <div id="drop-area" class="drop-area" style="display:none;">
              <p>Ïù¥Í≥≥Ïóê Ïù¥ÎØ∏ÏßÄÎ•º ÎìúÎûòÍ∑∏ÌïòÍ±∞ÎÇò ÌÅ¥Î¶≠ÌïòÏó¨ ÏóÖÎ°úÎìúÌïòÏÑ∏Ïöî (ÏµúÎåÄ 5Ïû•)</p>
              <input type="file" id="imageInput" multiple accept="image/*" hidden>
            </div>
            <div id="imagePreview" class="image-preview"></div>

            <div class="form-actions">
              <button type="submit" class="write-button">Îì±Î°ùÌïòÍ∏∞</button>
              <button type="button" class="write-button cancel-button" onclick="history.back()">Ï∑®ÏÜå</button>
            </div>
          </form>
        </div>
    </div>
  </div>
  
  <!-- Ìë∏ÌÑ∞ Î°úÎî© -->
  <div id="footer-include"></div>

  <script>
    // ÏßÄÏó≠Íµ¨ Î™©Î°ù Îç∞Ïù¥ÌÑ∞
    const districts = [
      "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ï¢ÖÎ°úÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ï§ëÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ïö©ÏÇ∞Íµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÏÑ±ÎèôÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í¥ëÏßÑÍµ¨",
      "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÎèôÎåÄÎ¨∏Íµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ï§ëÎûëÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÏÑ±Î∂ÅÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∞ïÎ∂ÅÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÎèÑÎ¥âÍµ¨",
      "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÎÖ∏ÏõêÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÏùÄÌèâÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÏÑúÎåÄÎ¨∏Íµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÎßàÌè¨Íµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÏñëÏ≤úÍµ¨",
      "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∞ïÏÑúÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Íµ¨Î°úÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∏àÏ≤úÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÏòÅÎì±Ìè¨Íµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÎèôÏûëÍµ¨",
      "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í¥ÄÏïÖÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÏÑúÏ¥àÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∞ïÎÇ®Íµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú ÏÜ°ÌååÍµ¨", "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∞ïÎèôÍµ¨",
      "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú Ï§ëÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú ÏÑúÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú ÎèôÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú ÏòÅÎèÑÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú Î∂ÄÏÇ∞ÏßÑÍµ¨",
      "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú ÎèôÎûòÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú ÎÇ®Íµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú Î∂ÅÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú Ìï¥Ïö¥ÎåÄÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú ÏÇ¨ÌïòÍµ¨",
      "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú Í∏àÏ†ïÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú Í∞ïÏÑúÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú Ïó∞Ï†úÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú ÏàòÏòÅÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú ÏÇ¨ÏÉÅÍµ¨", "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú Í∏∞Ïû•Íµ∞"
    ];

    // Ï†ïÏπòÏù∏ Îç∞Ïù¥ÌÑ∞ (Í∞ÄÎÇòÎã§ÏàúÏúºÎ°ú Ï†ïÎ†¨Îêú Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞)
    const politicians = [
      {
        id: 1,
        name: "Í∞ïÍ∏∞Ï†ï",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Í¥ëÏ£ºÍ¥ëÏó≠ÏãúÏû•",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=Í∞ïÍ∏∞Ï†ï"
      },
      {
        id: 2,
        name: "ÍπÄÍ±¥Ìù¨",
        party: "Î¨¥ÏÜåÏÜç",
        position: "ÏòÅÎ∂ÄÏù∏",
        photo: "https://via.placeholder.com/100x100/9B59B6/FFFFFF?text=ÍπÄÍ±¥Ìù¨"
      },
      {
        id: 3,
        name: "ÍπÄÍ∏∞ÌòÑ",
        party: "Íµ≠ÎØºÏùòÌûò",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ÍπÄÍ∏∞ÌòÑ"
      },
      {
        id: 4,
        name: "ÍπÄÎèôÏó∞",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Í≤ΩÍ∏∞ÎèÑÏßÄÏÇ¨",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ÍπÄÎèôÏó∞"
      },
      {
        id: 5,
        name: "ÍπÄÎØºÏÑù",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ÍπÄÎØºÏÑù"
      },
      {
        id: 6,
        name: "ÍπÄÏòÅÌôò",
        party: "Íµ≠ÎØºÏùòÌûò",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ÍπÄÏòÅÌôò"
      },
      {
        id: 7,
        name: "ÍπÄÌÉúÎÖÑ",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ÍπÄÌÉúÎÖÑ"
      },
      {
        id: 8,
        name: "Î∞ïÎØºÏãù",
        party: "Íµ≠ÎØºÏùòÌûò",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=Î∞ïÎØºÏãù"
      },
      {
        id: 9,
        name: "Î∞ïÏÑ±Ï§Ä",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=Î∞ïÏÑ±Ï§Ä"
      },
      {
        id: 10,
        name: "Î∞ïÏßÄÏõê",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=Î∞ïÏßÄÏõê"
      },
      {
        id: 11,
        name: "ÏÑúÎ≤îÏàò",
        party: "Íµ≠ÎØºÏùòÌûò",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ÏÑúÎ≤îÏàò"
      },
      {
        id: 12,
        name: "Ïã¨ÏÉÅÏ†ï",
        party: "Ï†ïÏùòÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/1ABC9C/FFFFFF?text=Ïã¨ÏÉÅÏ†ï"
      },
      {
        id: 13,
        name: "ÏïàÏ≤†Ïàò",
        party: "Íµ≠ÎØºÏùòÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/F39C12/FFFFFF?text=ÏïàÏ≤†Ïàò"
      },
      {
        id: 14,
        name: "Ïò§ÏÑ∏Ìõà",
        party: "Íµ≠ÎØºÏùòÌûò",
        position: "ÏÑúÏö∏ÌäπÎ≥ÑÏãúÏû•",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=Ïò§ÏÑ∏Ìõà"
      },
      {
        id: 15,
        name: "Ïú§ÏÑùÏó¥",
        party: "Íµ≠ÎØºÏùòÌûò",
        position: "ÎåÄÌÜµÎ†π",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=Ïú§ÏÑùÏó¥"
      },
      {
        id: 16,
        name: "Ïù¥ÎÇôÏó∞",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=Ïù¥ÎÇôÏó∞"
      },
      {
        id: 17,
        name: "Ïù¥Ïû¨Î™Ö",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "ÎåÄÌëú",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=Ïù¥Ïû¨Î™Ö"
      },
      {
        id: 18,
        name: "Ïù¥Ï§ÄÏÑù",
        party: "Î¨¥ÏÜåÏÜç",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/95A5A6/FFFFFF?text=Ïù¥Ï§ÄÏÑù"
      },
      {
        id: 19,
        name: "Ïù¥Ï≤†Í∑ú",
        party: "Íµ≠ÎØºÏùòÌûò",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=Ïù¥Ï≤†Í∑ú"
      },
      {
        id: 20,
        name: "ÏûÑÏ¢ÖÏÑ±",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ÏûÑÏ¢ÖÏÑ±"
      },
      {
        id: 21,
        name: "Ïû•Í≤ΩÌÉú",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=Ïû•Í≤ΩÌÉú"
      },
      {
        id: 22,
        name: "Ï†ïÏ≤≠Îûò",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=Ï†ïÏ≤≠Îûò"
      },
      {
        id: 23,
        name: "Ï°∞Íµ≠",
        party: "Ï°∞Íµ≠ÌòÅÏã†Îãπ",
        position: "ÎåÄÌëú",
        photo: "https://via.placeholder.com/100x100/8E44AD/FFFFFF?text=Ï°∞Íµ≠"
      },
      {
        id: 24,
        name: "ÏßÑÏòÅ",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ÏßÑÏòÅ"
      },
      {
        id: 25,
        name: "ÏµúÎØºÌù¨",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ÏµúÎØºÌù¨"
      },
      {
        id: 26,
        name: "Ï∂îÍ≤ΩÌò∏",
        party: "Íµ≠ÎØºÏùòÌûò",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=Ï∂îÍ≤ΩÌò∏"
      },
      {
        id: 27,
        name: "ÌïúÎèôÌõà",
        party: "Íµ≠ÎØºÏùòÌûò",
        position: "ÎåÄÌëú",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ÌïúÎèôÌõà"
      },
      {
        id: 28,
        name: "ÌóàÏùÄÏïÑ",
        party: "Íµ≠ÎØºÏùòÌûò",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ÌóàÏùÄÏïÑ"
      },
      {
        id: 29,
        name: "ÌôçÏ§ÄÌëú",
        party: "Íµ≠ÎØºÏùòÌûò",
        position: "ÎåÄÍµ¨Í¥ëÏó≠ÏãúÏû•",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ÌôçÏ§ÄÌëú"
      },
      {
        id: 30,
        name: "Ìô©Ìù¨",
        party: "ÎçîÎ∂àÏñ¥ÎØºÏ£ºÎãπ",
        position: "Íµ≠ÌöåÏùòÏõê",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=Ìô©Ìù¨"
      }
    ];

    let selectedPolitician = null;

    // Ï¥àÍ∏∞Ìôî Ìï®Ïàò
    function initializePage() {
      console.log('‚úÖ Ï†ïÏπòÏù∏ ÏÜåÌÜµ Í∏ÄÏì∞Í∏∞ ÌéòÏù¥ÏßÄ Ï¥àÍ∏∞Ìôî');
      
      // ÏßÄÏó≠Íµ¨ ÏûÖÎ†• ÌïÑÎìúÏóê Í∏∞Î≥∏Í∞í ÏÑ§Ï†ï
      const defaultDistrict = 'ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∞ïÎÇ®Íµ¨';
      document.getElementById('district').value = defaultDistrict;
      
      initializeEditor();
      initializeDistrictAutocomplete();
      initializePoliticianSearch();
      
      // Î°úÍ∑∏Ïù∏ ÌÉÄÏûÖÏóê Îî∞Î•∏ Ï†ïÏπòÏù∏ ÏÑ†ÌÉù Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÏÑ§Ï†ï
      setupPoliticianInterface();
      
      // Î™ÖÌï® Ïπ¥Îìú Ìèº Ï¥àÍ∏∞Ìôî
      togglePoliticianCardForm();
    }
    
    // Î°úÍ∑∏Ïù∏ ÌÉÄÏûÖÏóê Îî∞Î•∏ Ï†ïÏπòÏù∏ ÏÑ†ÌÉù Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÏÑ§Ï†ï
    function setupPoliticianInterface() {
      // Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞ (Ïã§Ï†úÎ°úÎäî ÏÑúÎ≤ÑÏóêÏÑú Í∞ÄÏ†∏ÏôÄÏïº Ìï®)
      const userInfo = getUserInfo();
      
      if (userInfo && userInfo.userType === 'politician') {
        // Ï†ïÏπòÏù∏ ÌöåÏõêÏù∏ Í≤ΩÏö∞
        showPoliticianUserInterface(userInfo);
      } else {
        // ÏùºÎ∞òÌöåÏõê ÎòêÎäî Î≥¥Ï¢åÏßÑÌöåÏõêÏù∏ Í≤ΩÏö∞
        showNormalUserInterface();
      }
    }
    
    // ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
    function getUserInfo() {
      // localStorageÎÇò sessionStorageÏóêÏÑú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
      const userInfo = localStorage.getItem('userInfo') || sessionStorage.getItem('userInfo');
      if (userInfo) {
        try {
          return JSON.parse(userInfo);
        } catch (e) {
          console.error('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÌååÏã± Ïò§Î•ò:', e);
        }
      }
      
      // Î°úÍ∑∏Ïù∏Îêú ÏÇ¨Ïö©Ïûê Ïù¥Î©îÏùº ÌôïÏù∏
      const userEmail = localStorage.getItem('userEmail') || sessionStorage.getItem('userEmail');
      
      if (userEmail === 'politician@example.com') {
        // Ï†ïÏπòÏù∏ ÌöåÏõê Ï†ïÎ≥¥
        return {
          userType: 'politician',
          email: 'politician@example.com',
          politicianId: 15, // Ïú§ÏÑùÏó¥ ÎåÄÌÜµÎ†π
          name: 'Ïú§ÏÑùÏó¥',
          party: 'Íµ≠ÎØºÏùòÌûò',
          position: 'ÎåÄÌÜµÎ†π',
          photo: 'https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=Ïú§ÏÑùÏó¥'
        };
      } else if (userEmail === 'test@example.com') {
        // ÏùºÎ∞òÌöåÏõê Ï†ïÎ≥¥
        return {
          userType: 'normal',
          email: 'test@example.com'
        };
      }
      
      // Î°úÍ∑∏Ïù∏ÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ ÎòêÎäî Îã§Î•∏ Ïù¥Î©îÏùº
      return null;
    }
    
    // Ï†ïÏπòÏù∏ ÌöåÏõêÏö© Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÌëúÏãú
    function showPoliticianUserInterface(userInfo) {
      document.getElementById('normalUserInterface').style.display = 'none';
      document.getElementById('politicianUserInterface').style.display = 'block';
      
      // Ï†ïÏπòÏù∏ Ï†ïÎ≥¥ ÏÑ§Ï†ï
      document.getElementById('autoSelectedPoliticianPhoto').src = userInfo.photo;
      document.getElementById('autoSelectedPoliticianPhoto').alt = userInfo.name;
      document.getElementById('autoSelectedPoliticianName').textContent = userInfo.name;
      document.getElementById('autoSelectedPoliticianDetails').textContent = `${userInfo.party} ¬∑ ${userInfo.position}`;
      document.getElementById('selectedPoliticianId').value = userInfo.politicianId;
      
      // ÏûêÎèôÏúºÎ°ú Ï†ïÏπòÏù∏ ÏÑ†ÌÉù
      selectedPolitician = {
        id: userInfo.politicianId,
        name: userInfo.name,
        party: userInfo.party,
        position: userInfo.position,
        photo: userInfo.photo
      };
      
      console.log('üîí Ï†ïÏπòÏù∏ ÌöåÏõê Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÌôúÏÑ±Ìôî:', userInfo.name);
    }
    
    // ÏùºÎ∞òÌöåÏõê/Î≥¥Ï¢åÏßÑÌöåÏõêÏö© Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÌëúÏãú
    function showNormalUserInterface() {
      document.getElementById('normalUserInterface').style.display = 'block';
      document.getElementById('politicianUserInterface').style.display = 'none';
      
      console.log('üë§ ÏùºÎ∞òÌöåÏõê/Î≥¥Ï¢åÏßÑÌöåÏõê Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÌôúÏÑ±Ìôî');
    }

    // Ï†ïÏπòÏù∏ Í≤ÄÏÉâ Ï¥àÍ∏∞Ìôî
    function initializePoliticianSearch() {
      const searchInput = document.getElementById('politicianSearch');
      const dropdown = document.getElementById('politicianDropdown');
      let selectedIndex = -1; // ÌÇ§Î≥¥Îìú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖòÏö© Ïù∏Îç±Ïä§
      
      // Ï†ïÏπòÏù∏ ÌöåÏõêÏù∏ Í≤ΩÏö∞ Í≤ÄÏÉâ Í∏∞Îä• ÎπÑÌôúÏÑ±Ìôî
      const userInfo = getUserInfo();
      if (userInfo && userInfo.userType === 'politician') {
        return; // Ï†ïÏπòÏù∏ ÌöåÏõêÏùÄ Í≤ÄÏÉâ Í∏∞Îä•ÏùÑ ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÏùå
      }

      // ÌÅ¥Î¶≠ Ïãú Ï†ÑÏ≤¥ Î™©Î°ù ÌëúÏãú
      searchInput.addEventListener('click', function() {
        displayAllPoliticians();
        dropdown.style.display = 'block';
        selectedIndex = -1;
      });

      searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase().trim();
        selectedIndex = -1; // ÏûÖÎ†• Ïãú ÏÑ†ÌÉù Ïù∏Îç±Ïä§ Ï¥àÍ∏∞Ìôî
        
        if (query.length === 0) {
          displayAllPoliticians();
          dropdown.style.display = 'block';
          return;
        }

        const filtered = politicians.filter(p => 
          p.name.toLowerCase().includes(query) || 
          p.party.toLowerCase().includes(query)
        );

        if (filtered.length > 0) {
          displayPoliticians(filtered, query);
        } else {
          // Îç∞Ïù¥ÌÑ∞Ïóê ÏóÜÎäî Ï†ïÏπòÏù∏ ÏûÖÎ†• Ïãú Ïª§Ïä§ÌÖÄ ÏòµÏÖò ÌëúÏãú
          displayCustomPolitician(query);
        }
        dropdown.style.display = 'block';
      });

      // ÌÇ§Î≥¥Îìú Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨
      searchInput.addEventListener('keydown', function(e) {
        const items = dropdown.querySelectorAll('.politician-item, .no-politician-option');
        
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          selectedIndex = Math.min(selectedIndex + 1, items.length - 1);
          updateSelection(items);
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          selectedIndex = Math.max(selectedIndex - 1, -1);
          updateSelection(items);
        } else if (e.key === 'Enter') {
          e.preventDefault();
          
          if (selectedIndex >= 0 && items[selectedIndex]) {
            // ÌÇ§Î≥¥ÎìúÎ°ú ÏÑ†ÌÉùÎêú Ìï≠Î™© ÌÅ¥Î¶≠
            items[selectedIndex].click();
          } else {
            // ÏÑ†ÌÉùÎêú Ìï≠Î™©Ïù¥ ÏóÜÏúºÎ©¥ Ï≤´ Î≤àÏß∏ Ìï≠Î™© ÏÑ†ÌÉù
            const query = this.value.trim();
            if (query && items.length > 0) {
              // "ÏÑ†ÌÉù ÏïàÌï®" ÏòµÏÖòÏù¥ ÏïÑÎãå Ï≤´ Î≤àÏß∏ Ï†ïÏπòÏù∏ ÏÑ†ÌÉù
              const firstPoliticianItem = dropdown.querySelector('.politician-item');
              if (firstPoliticianItem) {
                firstPoliticianItem.click();
              }
            }
          }
        } else if (e.key === 'Escape') {
          dropdown.style.display = 'none';
          selectedIndex = -1;
        }
      });

      searchInput.addEventListener('focus', function() {
        if (!this.value.trim()) {
          displayAllPoliticians();
          dropdown.style.display = 'block';
        }
        selectedIndex = -1;
      });

      // Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú ÎìúÎ°≠Îã§Ïö¥ Îã´Í∏∞
      document.addEventListener('click', function(e) {
        if (!searchInput.contains(e.target) && !dropdown.contains(e.target)) {
          dropdown.style.display = 'none';
          selectedIndex = -1;
        }
      });
    }

    // ÌÇ§Î≥¥Îìú ÏÑ†ÌÉù ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
    function updateSelection(items) {
      items.forEach((item, index) => {
        if (index === selectedIndex) {
          item.style.backgroundColor = '#007bff';
          item.style.color = 'white';
        } else {
          item.style.backgroundColor = '';
          item.style.color = '';
        }
      });
    }

    function displayAllPoliticians() {
      displayPoliticians(politicians);
    }

    function displayPoliticians(politicianList, query = '') {
      const dropdown = document.getElementById('politicianDropdown');
      dropdown.innerHTML = '';

      // "ÏÑ†ÌÉù ÏïàÌï®" ÏòµÏÖò Ï∂îÍ∞Ä
      const noneOption = document.createElement('div');
      noneOption.className = 'no-politician-option';
      noneOption.textContent = 'Ï†ïÏπòÏù∏ÏùÑ ÏÑ†ÌÉùÌïòÏßÄ ÏïäÏùå';
      noneOption.addEventListener('click', () => clearPolitician());
      dropdown.appendChild(noneOption);

      politicianList.forEach(politician => {
        const item = document.createElement('div');
        item.className = 'politician-item';
        item.innerHTML = `
          <img src="${politician.photo}" alt="${politician.name}" class="politician-photo">
          <div class="politician-info">
            <div class="politician-name">${politician.name}</div>
            <div class="politician-party">${politician.party}</div>
            <div class="politician-position">${politician.position}</div>
          </div>
        `;

        item.addEventListener('click', () => selectPolitician(politician));
        dropdown.appendChild(item);
      });
    }

    function displayCustomPolitician(query) {
      const dropdown = document.getElementById('politicianDropdown');
      dropdown.innerHTML = '';

      // "ÏÑ†ÌÉù ÏïàÌï®" ÏòµÏÖò Ï∂îÍ∞Ä
      const noneOption = document.createElement('div');
      noneOption.className = 'no-politician-option';
      noneOption.textContent = 'Ï†ïÏπòÏù∏ÏùÑ ÏÑ†ÌÉùÌïòÏßÄ ÏïäÏùå';
      noneOption.addEventListener('click', () => clearPolitician());
      dropdown.appendChild(noneOption);

      // Ïª§Ïä§ÌÖÄ Ï†ïÏπòÏù∏ ÏÉùÏÑ±
      const customPolitician = {
        id: 'custom_' + Date.now(),
        name: query,
        party: 'Ï†ïÎãπ ÎØ∏ÏÉÅ',
        position: 'Ï†ïÏπòÏù∏',
        photo: 'https://via.placeholder.com/100x100/6c757d/FFFFFF?text=' + encodeURIComponent(query.charAt(0))
      };

      const item = document.createElement('div');
      item.className = 'politician-item';
      item.innerHTML = `
        <img src="${customPolitician.photo}" alt="${customPolitician.name}" class="politician-photo">
        <div class="politician-info">
          <div class="politician-name">${customPolitician.name}</div>
          <div class="politician-party">${customPolitician.party}</div>
          <div class="politician-position">${customPolitician.position}</div>
        </div>
      `;

      item.addEventListener('click', () => selectPolitician(customPolitician));
      dropdown.appendChild(item);
    }

    function clearPolitician() {
      selectedPolitician = null;
      document.getElementById('politicianSearch').value = '';
      document.getElementById('selectedPoliticianId').value = '';
      
      // UI Ï†ÑÌôò
      document.getElementById('politicianSearchContainer').style.display = 'block';
      document.getElementById('selectedPoliticianContainer').style.display = 'none';
      document.getElementById('politicianDropdown').style.display = 'none';
    }

    function selectPolitician(politician) {
      selectedPolitician = politician;
      
      // ÏÑ†ÌÉùÎêú Ï†ïÏπòÏù∏ ÌëúÏãú
      document.getElementById('selectedPoliticianPhoto').src = politician.photo;
      document.getElementById('selectedPoliticianPhoto').alt = politician.name;
      document.getElementById('selectedPoliticianName').textContent = politician.name;
      document.getElementById('selectedPoliticianDetails').textContent = `${politician.party} ¬∑ ${politician.position}`;
      document.getElementById('selectedPoliticianId').value = politician.id;
      
      // UI Ï†ÑÌôò
      document.getElementById('politicianSearchContainer').style.display = 'none';
      document.getElementById('selectedPoliticianContainer').style.display = 'block';
      document.getElementById('politicianDropdown').style.display = 'none';
    }

    function changePolitician() {
      selectedPolitician = null;
      document.getElementById('politicianSearch').value = '';
      document.getElementById('selectedPoliticianId').value = '';
      
      // UI Ï†ÑÌôò
      document.getElementById('politicianSearchContainer').style.display = 'block';
      document.getElementById('selectedPoliticianContainer').style.display = 'none';
      document.getElementById('politicianSearch').focus();
    }
    
    // ==================== Ï†ïÏπòÏù∏ Î™ÖÌï® Ïπ¥Îìú Ìèº Ï†úÏñ¥ ====================
    
    /**
     * Ï†ïÏπòÏù∏ Í≥ÑÏ†ï Ïó¨Î∂Ä ÌôïÏù∏ Î∞è Î™ÖÌï® Ïπ¥Îìú Ìèº ÌëúÏãú/Ïà®ÍπÄ
     */
    function togglePoliticianCardForm() {
      const politicianCardSection = document.getElementById('politicianCardSection');
      const userType = localStorage.getItem('userType') || sessionStorage.getItem('userType');
      
      // Ï†ïÏπòÏù∏, Íµ≠ÌöåÏùòÏõê, Î≥¥Ï¢åÍ¥ÄÏù∏ Í≤ΩÏö∞ÏóêÎßå Î™ÖÌï® Ïπ¥Îìú Ìèº ÌëúÏãú
      if (['politician', 'mp', 'staff'].includes(userType)) {
        politicianCardSection.style.display = 'block';
        
        // Í∏∞Ï°¥ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î°ú Ìèº ÎØ∏Î¶¨ Ï±ÑÏö∞Í∏∞
        populatePoliticianCardForm();
      } else {
        politicianCardSection.style.display = 'none';
      }
    }
    
    /**
     * Í∏∞Ï°¥ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î°ú Î™ÖÌï® Ïπ¥Îìú Ìèº ÎØ∏Î¶¨ Ï±ÑÏö∞Í∏∞
     */
    function populatePoliticianCardForm() {
      // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóêÏÑú Í∏∞Ï°¥ Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
      const storedData = JSON.parse(localStorage.getItem('politicianCardData') || '{}');
      
      if (storedData.name) {
        document.getElementById('politicianName').value = storedData.name;
      }
      if (storedData.title) {
        document.getElementById('politicianTitle').value = storedData.title;
      }
      if (storedData.party) {
        document.getElementById('politicianParty').value = storedData.party;
      }
      if (storedData.email) {
        document.getElementById('politicianEmail').value = storedData.email;
      }
      if (storedData.website) {
        document.getElementById('politicianWebsite').value = storedData.website;
      }
      if (storedData.youtube) {
        document.getElementById('politicianYoutube').value = storedData.youtube;
      }
      if (storedData.youtubeName) {
        document.getElementById('politicianYoutubeName').value = storedData.youtubeName;
      }
      if (storedData.bankAccount) {
        document.getElementById('politicianBankAccount').value = storedData.bankAccount;
      }
      if (storedData.motto) {
        document.getElementById('politicianMotto').value = storedData.motto;
      }
    }
    
    /**
     * Î™ÖÌï® Ïπ¥Îìú Ìèº Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
     */
    function savePoliticianCardData() {
      const formData = {
        name: document.getElementById('politicianName').value,
        title: document.getElementById('politicianTitle').value,
        party: document.getElementById('politicianParty').value,
        email: document.getElementById('politicianEmail').value,
        website: document.getElementById('politicianWebsite').value,
        youtube: document.getElementById('politicianYoutube').value,
        youtubeName: document.getElementById('politicianYoutubeName').value,
        bankAccount: document.getElementById('politicianBankAccount').value,
        motto: document.getElementById('politicianMotto').value
      };
      
      // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê Ï†ÄÏû•
      localStorage.setItem('politicianCardData', JSON.stringify(formData));
      
      return formData;
    }
    
    // ÏßÄÏó≠Íµ¨ ÏûêÎèôÏôÑÏÑ± Ï¥àÍ∏∞Ìôî
    function initializeDistrictAutocomplete() {
      const districtInput = document.getElementById("district");
      const autocompleteList = document.getElementById("autocomplete-list");

      // ÏßÄÏó≠Íµ¨ Í≥µÍ∞ú/ÎπÑÍ≥µÍ∞ú ÎùºÎîîÏò§ Î≤ÑÌäº Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä
      const visibilityRadios = document.querySelectorAll('input[name="districtVisibility"]');
      visibilityRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          if (this.value === 'private') {
            districtInput.value = 'ÎπÑÍ≥µÍ∞ú';
            districtInput.readOnly = true;
            districtInput.style.background = '#f8f9fa';
            districtInput.style.color = '#666';
            autocompleteList.innerHTML = "";
          } else {
            const defaultDistrict = localStorage.getItem('userDistrict') || sessionStorage.getItem('userDistrict') || 'ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∞ïÎÇ®Íµ¨';
            districtInput.value = defaultDistrict;
            districtInput.readOnly = false;
            districtInput.style.background = 'white';
            districtInput.style.color = '#333';
          }
        });
      });

      // ÏûêÎèôÏôÑÏÑ± ÌïÑÌÑ∞ÎßÅ
      districtInput.addEventListener("input", function () {
        // ÎπÑÍ≥µÍ∞ú Î™®ÎìúÏóêÏÑúÎäî ÏûÖÎ†• Î¨¥Ïãú
        if (document.querySelector('input[name="districtVisibility"]:checked').value === 'private') {
          return;
        }
        
        const value = this.value.toLowerCase();
        autocompleteList.innerHTML = "";

        if (!value) return;

        const filtered = districts.filter(d => d.toLowerCase().includes(value)).slice(0, 10);

        filtered.forEach(item => {
          const div = document.createElement("div");
          div.classList.add("autocomplete-item");
          div.textContent = item;
          div.addEventListener("click", () => {
            districtInput.value = item;
            autocompleteList.innerHTML = "";
          });
          autocompleteList.appendChild(div);
        });
      });

      // ÏûÖÎ†• ÌïÑÎìú Ìè¨Ïª§Ïä§ Ïãú Ï†ÑÏ≤¥ Î™©Î°ù ÌëúÏãú
      districtInput.addEventListener("focus", function () {
        // ÎπÑÍ≥µÍ∞ú Î™®ÎìúÏóêÏÑúÎäî ÏûêÎèôÏôÑÏÑ± ÌëúÏãú ÏïàÌï®
        if (document.querySelector('input[name="districtVisibility"]:checked').value === 'private') {
          return;
        }
        
        const defaultDistrict = localStorage.getItem('userDistrict') || sessionStorage.getItem('userDistrict') || 'ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∞ïÎÇ®Íµ¨';
        if (!this.value || this.value === defaultDistrict) {
          showAutocompleteList("");
        }
      });

      // Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú ÏûêÎèôÏôÑÏÑ± Îã´Í∏∞
      document.addEventListener("click", function (e) {
        if (!autocompleteList.contains(e.target) && e.target !== districtInput) {
          autocompleteList.innerHTML = "";
        }
      });
    }

    function showAutocompleteList(value) {
      const autocompleteList = document.getElementById("autocomplete-list");
      
      // ÎπÑÍ≥µÍ∞ú Î™®ÎìúÏóêÏÑúÎäî ÏûêÎèôÏôÑÏÑ± ÌëúÏãú ÏïàÌï®
      if (document.querySelector('input[name="districtVisibility"]:checked').value === 'private') {
        return;
      }
      
      autocompleteList.innerHTML = "";
      
      const filtered = value
        ? districts.filter(d => d.toLowerCase().includes(value.toLowerCase()))
        : districts;

      filtered.slice(0, 15).forEach(item => {
        const div = document.createElement("div");
        div.classList.add("autocomplete-item");
        div.textContent = item;
        div.addEventListener("click", () => {
          document.getElementById("district").value = item;
          autocompleteList.innerHTML = "";
        });
        autocompleteList.appendChild(div);
      });
    }
    
    // Toast UI Editor Ï¥àÍ∏∞Ìôî
    let editor;
    function initializeEditor() {
      editor = new toastui.Editor({
        el: document.querySelector('#editor'),
        height: '500px',
        initialEditType: 'wysiwyg',
        previewStyle: 'vertical',
        language: 'ko'
      });
    }
    
    // Ìèº Ï†úÏ∂ú Ï≤òÎ¶¨
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üéØ DOM Î°úÎìú ÏôÑÎ£å - Ï†ïÏπòÏù∏ ÏÜåÌÜµ Í∏ÄÏì∞Í∏∞ ÌéòÏù¥ÏßÄ Ï¥àÍ∏∞Ìôî');
      initializePage();
      
      const form = document.getElementById('writeForm');
      if (form) {
        form.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // Ï†ïÏπòÏù∏ ÏÑ†ÌÉù Ïó¨Î∂Ä ÌôïÏù∏ (ÏÑ†ÌÉùÏÇ¨Ìï≠Ïù¥ÎØÄÎ°ú Ï≤¥ÌÅ¨ÌïòÏßÄ ÏïäÏùå)
          
          // Ï†ïÏπòÏù∏ ÌöåÏõêÏù∏ Í≤ΩÏö∞ ÏûêÎèô ÏÑ†ÌÉùÎêú Ï†ïÏπòÏù∏ Ï†ïÎ≥¥ ÌôïÏù∏
          const userInfo = getUserInfo();
          if (userInfo && userInfo.userType === 'politician' && !selectedPolitician) {
            // Ï†ïÏπòÏù∏ ÌöåÏõêÏù¥ÏßÄÎßå selectedPoliticianÏù¥ ÏóÜÎäî Í≤ΩÏö∞ ÏûêÎèô ÏÑ§Ï†ï
            selectedPolitician = {
              id: userInfo.politicianId,
              name: userInfo.name,
              party: userInfo.party,
              position: userInfo.position,
              photo: userInfo.photo
            };
          }
          
          // ÏóêÎîîÌÑ∞ ÎÇ¥Ïö© Í∞ÄÏ†∏Ïò§Í∏∞
          const htmlContent = editor.getHTML();
          document.getElementById('hiddenContent').value = htmlContent;
          
          const submitBtn = form.querySelector('.write-button');
          submitBtn.disabled = true;
          submitBtn.textContent = 'Îì±Î°ù Ï§ë...';
          
          // Í≤åÏãúÍ∏Ä Îç∞Ïù¥ÌÑ∞ ÏàòÏßë
          const isDistrictPublic = document.querySelector('input[name="districtVisibility"]:checked').value === 'public';
          const districtValue = isDistrictPublic ? document.getElementById('district').value : '';
          
          // ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ (ÏùµÎ™ÖÏúºÎ°ú ÏÑ§Ï†ï)
          const userNickname = 'ÏùµÎ™Ö';
          const userEmail = '';
          
          // Î™ÖÌï® Ïπ¥Îìú Îç∞Ïù¥ÌÑ∞ ÏàòÏßë (Ï†ïÏπòÏù∏ Í≥ÑÏ†ïÏù∏ Í≤ΩÏö∞)
          let politicianCardData = null;
          const userType = localStorage.getItem('userType') || sessionStorage.getItem('userType');
          if (['politician', 'mp', 'staff'].includes(userType)) {
            politicianCardData = savePoliticianCardData();
            console.log('üìã Î™ÖÌï® Ïπ¥Îìú Îç∞Ïù¥ÌÑ∞:', politicianCardData);
          }
          
          const postData = {
            title: document.getElementById('title').value,
            content: htmlContent,
            district: districtValue,
            showDistrict: isDistrictPublic,
            politician: selectedPolitician || null, // ÏÑ†ÌÉùÌïòÏßÄ ÏïäÏúºÎ©¥ null
            author: userNickname,
            email: userEmail,
            timestamp: new Date().toISOString(),
            politicianCard: politicianCardData // Î™ÖÌï® Ïπ¥Îìú Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞Ä
          };
          
          console.log('üìù Ï†ïÏπòÏù∏ ÏÜåÌÜµ Í≤åÏãúÍ∏Ä Îç∞Ïù¥ÌÑ∞:', postData);
          
          // Ïã§Ï†úÎ°úÎäî ÏÑúÎ≤ÑÎ°ú Îç∞Ïù¥ÌÑ∞ Ï†ÑÏÜ°
          setTimeout(() => {
            alert('Ï†ïÏπòÏù∏ ÏÜåÌÜµ Í≤åÏãúÍ∏ÄÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Îì±Î°ùÎêòÏóàÏäµÎãàÎã§!');
            submitBtn.disabled = false;
            submitBtn.textContent = 'Îì±Î°ùÌïòÍ∏∞';
            
            // Í≤åÏãúÌåê Î™©Î°ùÏúºÎ°ú Ïù¥Îèô
            window.location.href = 'voice.html';
          }, 1500);
        });
      }
    });
    

  </script>
  
  <!-- JavaScript Ïù∏ÌÅ¥Î£®Îìú ÏΩîÎìú -->
  <script>
    function includeHTML(id, file) {
      fetch(file)
      .then(response => response.text())
      .then(data => {
        document.getElementById(id).innerHTML = data;
        console.log('‚úÖ ' + file + ' Ìè¨Ìï® ÏôÑÎ£å');
      })
      .catch(error => {
        console.error('‚ùå ÌååÏùº Î°úÎî© Ïã§Ìå®:', error);
      });
    }

    includeHTML("header-include", "header.html");
    includeHTML("footer-include", "footer.html");
  </script>
<!-- üÜï ÏÉàÎ°úÏö¥ Î°úÍ∑∏Ïù∏ ÏãúÏä§ÌÖú - ÌéòÏù¥ÏßÄ Í¥ÄÎ¶¨Ïûê -->
<script src="page-manager.js"></script>
</body>
</html>