<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì •ì¹˜ë°©ë§ì´ - ì‰½ê³  ë¹ ë¥´ê²Œ, ì •ì¹˜ì™€ ì†Œí†µí•˜ë‹¤!</title>
  <meta name="description" content="ì •ì¹˜ì¸ê³¼ êµ­ë¯¼ì´ ì‰½ê³  ë¹ ë¥´ê²Œ ì†Œí†µí•˜ëŠ” ì»¤ë®¤ë‹ˆí‹°, ì‹¤ì‹œê°„ ëŒ“ê¸€, ì¸ê¸°ê¸€, íˆ¬í‘œ ë“± ë‹¤ì–‘í•œ ì •ì¹˜ ì°¸ì—¬ ì„œë¹„ìŠ¤ ì œê³µ.">
  <meta name="keywords" content="ì •ì¹˜, ì»¤ë®¤ë‹ˆí‹°, íˆ¬í‘œ, ììœ ê²Œì‹œíŒ, ì •ì¹˜ì¸, ì‹¤ì‹œê°„ ëŒ“ê¸€, ì •ì¹˜ë°©ë§ì´">
  <!-- ë„¤ì´ë²„ ì†Œìœ í™•ì¸ ë©”íƒ€íƒœê·¸ ì˜ˆì‹œ (ì‹¤ì œ ë°œê¸‰ê°’ìœ¼ë¡œ êµì²´ í•„ìš”) -->
  <meta content="5fa68c229b6a80fe78209f803f0a0ba9d7bbc4b5" name="naver-site-verification">
  <!-- Open Graph íƒœê·¸ -->
  <meta property="og:title" content="ì •ì¹˜ë°©ë§ì´ - ì‰½ê³  ë¹ ë¥´ê²Œ, ì •ì¹˜ì™€ ì†Œí†µí•˜ë‹¤!">
  <meta property="og:description" content="ì •ì¹˜ì¸ê³¼ êµ­ë¯¼ì´ ì‰½ê³  ë¹ ë¥´ê²Œ ì†Œí†µí•˜ëŠ” ì»¤ë®¤ë‹ˆí‹°, ì‹¤ì‹œê°„ ëŒ“ê¸€, ì¸ê¸°ê¸€, íˆ¬í‘œ ë“± ë‹¤ì–‘í•œ ì •ì¹˜ ì°¸ì—¬ ì„œë¹„ìŠ¤ ì œê³µ.">
  <meta property="og:image" content="https://www.polibat.com/images/og_image.png">
  <meta property="og:url" content="https://www.polibat.com/">
  <meta property="og:type" content="website">
  <!-- robots.txt, sitemap.xmlì€ ì‚¬ì´íŠ¸ ë£¨íŠ¸ì— ë³„ë„ íŒŒì¼ë¡œ ì¶”ê°€ í•„ìš” -->
  <link rel="icon" type="image/x-icon" href="image/oguring_favicon.ico">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    header {
      position: fixed;
      top: 0;
      width: 100%;
      background: #fff;
      z-index: 1000;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    /* PC ë ˆì´ì•„ì›ƒ (ê¸°ë³¸) */
    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      padding: 10px 20px;
    }

    .logo {
      font-size: 28px;
      font-weight: bold;
      color: #333;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .logo a {
      color: inherit;
      text-decoration: none;
    }

    /* PCì—ì„œ nav-wrapperëŠ” flex: 1ë¡œ ë‚˜ë¨¸ì§€ ê³µê°„ì„ ì°¨ì§€í•˜ê³  ìš°ì¸¡ ì •ë ¬ */
    .nav-wrapper {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 20px;
    }

    .menu {
      display: flex;
      gap: 20px;
      font-family: 'Giants-Bold', sans-serif;
      overflow-x: auto;
      overflow-y: hidden; /* ìƒí•˜ ìŠ¤í¬ë¡¤ ë°©ì§€ */
    }

    .menu a {
      position: relative;
      text-decoration: none;
      font-size: 21px;
      color: #333;
      transition: color 0.3s;
      flex-shrink: 0;
      font-weight: 600;
    }

    .menu a::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0px;
      width: 0;
      height: 3px;
      background-color: #000;  /* ì£¼ì„ í•´ì œí•˜ê³  ê²€ì€ìƒ‰ ë°‘ì¤„ */
      transition: width 0.3s ease;
    }
    /* í˜¸ë²„ ì‹œì—ë„ ìƒ‰ìƒ ë³€ê²½ */
    .menu a:hover {
      color: #000;
    }

    .menu a:hover::after,
    .menu a.active::after {
      width: 100% !important;
    }

    /* ë” ê°•ë ¥í•œ active ìŠ¤íƒ€ì¼ */
    .menu a.active {
      color: #000 !important;
      font-weight: 700 !important;
    }

    /* ì‚¬ìš©ì ë©”ë‰´ ì»¨í…Œì´ë„ˆ */
    .user-menu {
      display: flex;
      align-items: center;
      gap: 12px;
      position: relative;
    }

    /* ë¡œê·¸ì¸ ë²„íŠ¼ */
    .login-btn {
      display: inline-block;
      padding: 8px 16px;
      background: #000000;
      color: #fff;
      border: none;
      border-radius: 20px;
      text-decoration: none;
      font-size: 16px;
      transition: background 0.3s;
      white-space: nowrap;
      font-weight: 600;
      cursor: pointer;
    }
    .login-btn:hover { 
      background: #eee;
      color: #000;
    }

    /* ë§ˆì´í˜ì´ì§€ ì•„ì´ì½˜ ë²„íŠ¼ */
    .mypage-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: #f8f9fa;
      border-radius: 50%;
      text-decoration: none;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    .mypage-icon:hover {
      background: #e9ecef;
      border-color: #000;
    }

    .mypage-icon svg {
      width: 20px;
      height: 20px;
      fill: #333;
      transition: fill 0.3s ease;
    }

    .mypage-icon:hover svg {
      fill: #000;
    }

    /* ì‚¬ìš©ì íƒ€ì… ë±ƒì§€ */
    .user-badge {
      position: absolute;
      bottom: -2px;
      right: -2px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 8px;
      font-weight: bold;
      color: white;
      border: 2px solid white;
    }

    .user-badge.politician {
      background: #dc3545;
    }

    .user-badge.user {
      background: #28a745;
    }

    /* ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ */
    .logout-btn {
      display: inline-block;
      padding: 6px 12px;
      background: #6c757d;
      color: #fff;
      border: none;
      border-radius: 20px;
      text-decoration: none;
      font-size: 14px;
      transition: background 0.3s;
      white-space: nowrap;
      font-weight: 500;
      cursor: pointer;
    }
    .logout-btn:hover { 
      background: #5a6268; 
      color: #fff; 
    }

    /* ìˆ¨ê¹€ í´ë˜ìŠ¤ */
    .hidden {
      display: none !important;
    }

    /* ë¡œê·¸ì¸ëœ ìƒíƒœ í‘œì‹œ */
    .logged-in-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 4px 8px;
      font-size: 14px;
      color: #000;
    }

    .logged-in-indicator.politician {
      background: #fdeaea;
      color: #7a2e2e;
    }

    /* ì‚¬ìš©ìëª… í‘œì‹œ */
    .username-display {
      font-size: 12px;
      color: #555;
      margin-right: 4px;
      font-weight: bold;
    }

    /* ëª¨ë°”ì¼ ë©”ë‰´ ë²„íŠ¼ */
    .mobile-menu-button {
      display: none;
      width: 32px;
      height: 32px;
      background: #f0f0f0;
      border: 1px solid #ccc;
      border-radius: 6px;
      cursor: pointer;
      justify-content: center;
      align-items: center;
      transition: all 0.2s;
    }

    .mobile-menu-button:hover {
      background: #e0e0e0;
    }

    .mobile-menu-button:active {
      transform: scale(0.95);
    }

    /* ì  3ê°œ ì•„ì´ì½˜ */
    .dots-icon {
      display: flex;
      flex-direction: column;
      gap: 2px;
      pointer-events: none;
    }

    .dot {
      width: 4px;
      height: 4px;
      background: #333;
      border-radius: 50%;
    }

    /* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ */
    .mobile-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      min-width: 160px;
      z-index: 1001;
      margin-top: 8px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.2s ease;
    }

    .mobile-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-item {
      display: block;
      width: 100%;
      padding: 12px 16px;
      text-decoration: none;
      color: #333;
      font-size: 14px;
      background: none;
      border: none;
      text-align: left;
      cursor: pointer;
      transition: background-color 0.15s;
    }

    .dropdown-item:hover {
      background-color: #f8f9fa;
    }

    .dropdown-divider {
      height: 1px;
      background: #eee;
      margin: 4px 0;
    }

    /* ì‚¬ìš©ì ì •ë³´ ì˜ì—­ */
    .user-info-section {
      padding: 12px 16px;
      background: #f8f9fa;
      border-bottom: 1px solid #eee;
    }

    .user-name {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 2px;
    }

    .user-type {
      font-size: 12px;
      color: #666;
    }

    /* ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒ */
    @media (max-width: 768px) {
      .header-container {
        display: grid;
        grid-template-columns: 1fr auto;
        grid-template-rows: auto auto;
        gap: 12px;
        padding: 10px 15px;
        align-items: center;
      }

      /* ë¡œê³ ë¥¼ ì²« ë²ˆì§¸ í–‰ ì²« ë²ˆì§¸ ì—´ì— ë°°ì¹˜ */
      .logo {
        grid-column: 1;
        grid-row: 1;
        font-size: 20px;
        justify-self: start;
      }

      .logo img {
        width: 120px !important;
      }

      /* nav-wrapperë¥¼ ì¬êµ¬ì„± */
      .nav-wrapper {
        display: contents;
      }

      /* ë©”ë‰´ë¥¼ ë‘ ë²ˆì§¸ í–‰ ì „ì²´ì— ë°°ì¹˜ */
      .menu {
        grid-column: 1 / -1;
        grid-row: 2;
        justify-content: center;
        gap: 15px;
        /*padding: 8px 0;*/
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      .menu a {
        font-size: 16px;
        padding: 8px 12px;
        font-weight: 600;
        flex-shrink: 0;
      }

      /* ì‚¬ìš©ì ë©”ë‰´ë¥¼ ì²« ë²ˆì§¸ í–‰ ë‘ ë²ˆì§¸ ì—´ì— ë°°ì¹˜ */
      .user-menu {
        grid-column: 2;
        grid-row: 1;
        justify-self: end;
        gap: 8px;
      }

      /* ëª¨ë°”ì¼ì—ì„œ ê¸°ì¡´ ë²„íŠ¼ë“¤ ìˆ¨ê¸°ê³  ë©”ë‰´ ë²„íŠ¼ë§Œ í‘œì‹œ */
      .login-btn,
      .logout-btn,
      .mypage-icon,
      .logged-in-indicator {
        display: none;
      }

      .mobile-menu-button {
        display: flex;
      }
    }

    .header-placeholder {
      height: 80px;
    }

    @media (max-width: 768px) {
      .header-placeholder {
        height: 120px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <!-- ë¡œê³  -->
      <div class="logo">
        <a href="index.html">
          <img src="images/Group_2@2xx.png" alt="ì •ì¹˜ë°©ë§ì´" style="width: clamp(100px, 28vw, 140px); height: auto;">
        </a>
      </div>
      
      <div class="nav-wrapper">
        <!-- ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ -->
        <nav class="menu">
          <a href="board.html">ììœ ê²Œì‹œíŒ</a>
          <a href="voice.html">ì •ì¹˜ì¸ê²Œì‹œíŒ</a>
          <a href="vote_board.html">íˆ¬í‘œ</a>
        </nav>
        
        <!-- ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ìƒíƒœ (ê¸°ë³¸ í‘œì‹œ) -->
        <div class="user-menu" id="loginMenu">
          <a href="login.html" class="login-btn">ë¡œê·¸ì¸/íšŒì›ê°€ì…</a>
          
          <!-- ëª¨ë°”ì¼ ë©”ë‰´ ë²„íŠ¼ -->
          <button type="button" class="mobile-menu-button" data-menu-type="login">
            <div class="dots-icon">
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
            </div>
          </button>
          
          <!-- ë“œë¡­ë‹¤ìš´ ë©”ë‰´ -->
          <div class="mobile-dropdown" id="loginDropdown">
            <a href="login.html" class="dropdown-item">ë¡œê·¸ì¸/íšŒì›ê°€ì…</a>
          </div>
        </div>
        
        <!-- ë¡œê·¸ì¸í•œ ìƒíƒœ (ê¸°ë³¸ ìˆ¨ê¹€) -->
        <div class="user-menu hidden" id="loggedInMenu">
          <!--
          <div class="logged-in-indicator" id="userIndicator">
            <span class="username-display" id="usernameDisplay">ì‚¬ìš©ìëª…</span>
            <span id="userTypeText">ì¼ë°˜íšŒì›</span>
          </div>
          -->
          <a href="member_info.html" class="mypage-icon" id="mypageBtn" title="ë§ˆì´í˜ì´ì§€">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
          </a>
          <button type="button" class="logout-btn" id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</button>
          
          <!-- ëª¨ë°”ì¼ ë©”ë‰´ ë²„íŠ¼ -->
          <button type="button" class="mobile-menu-button" data-menu-type="user">
            <div class="dots-icon">
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
            </div>
          </button>
          
          <!-- ë“œë¡­ë‹¤ìš´ ë©”ë‰´ -->
          <div class="mobile-dropdown" id="userDropdown">
            <div class="user-info-section">
              <div class="user-name" id="dropdownUsername">ì‚¬ìš©ìëª…</div>
              <div class="user-type" id="dropdownUsertype">ì¼ë°˜íšŒì›</div>
            </div>
            <a href="member_info.html" class="dropdown-item">ë§ˆì´í˜ì´ì§€</a>
            <div class="dropdown-divider"></div>
            <button type="button" class="dropdown-item logout-dropdown-btn">ë¡œê·¸ì•„ì›ƒ</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="header-placeholder"></div>

  <script>
    // ğŸ”’ ì „ì—­ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€ ì‹œìŠ¤í…œ
    (function() {
        'use strict';
        
        // ì´ë¯¸ í—¤ë” ì‹œìŠ¤í…œì´ ì´ˆê¸°í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸
        if (window.HEADER_SYSTEM_INITIALIZED) {
            console.log('âš ï¸ í—¤ë” ì‹œìŠ¤í…œì´ ì´ë¯¸ ì´ˆê¸°í™”ë¨, ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€');
            return;
        }
        
        // í—¤ë” ì‹œìŠ¤í…œ ì´ˆê¸°í™” í”Œë˜ê·¸ ì„¤ì •
        window.HEADER_SYSTEM_INITIALIZED = true;
        console.log('ğŸ”’ í—¤ë” ì‹œìŠ¤í…œ ì´ˆê¸°í™” í”Œë˜ê·¸ ì„¤ì •');

        // ğŸ†• ìë™ í˜ì´ì§€ ê°ì§€ ê¸°ëŠ¥ì„ í¬í•¨í•œ í†µí•© í—¤ë” ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ
        class UnifiedHeaderManager {
            constructor() {
                this.menuHighlightExecuted = false; // ë©”ë‰´ í•˜ì´ë¼ì´íŠ¸ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
                this.init();
                this.bindEvents();
            }

            init() {
                console.log('ğŸš€ í—¤ë” ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™”');
                this.updateHeaderState();
                this.highlightCurrentPageMenu(); // ğŸ†• ìë™ í˜ì´ì§€ ê°ì§€ í•˜ì´ë¼ì´íŠ¸
            }

            // ğŸ†• ìë™ìœ¼ë¡œ í˜„ì¬ í˜ì´ì§€ë¥¼ ê°ì§€í•˜ì—¬ ë©”ë‰´ í•˜ì´ë¼ì´íŠ¸ (ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€)
            highlightCurrentPageMenu() {
                // ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€ - ì´ë¯¸ ì‹¤í–‰ëœ ê²½ìš° return
                if (this.menuHighlightExecuted) {
                    console.log('âš ï¸ ë©”ë‰´ í•˜ì´ë¼ì´íŠ¸ ì´ë¯¸ ì‹¤í–‰ë¨, ì¤‘ë³µ ë°©ì§€');
                    return;
                }
                
                try {
                    // ì‹¤í–‰ í”Œë˜ê·¸ ì„¤ì •
                    this.menuHighlightExecuted = true;
                    
                    // í˜„ì¬ í˜ì´ì§€ ìë™ ê°ì§€
                    const currentPath = window.location.pathname;
                    const currentFile = currentPath.split('/').pop() || 'index.html';
                    
                    console.log('ğŸ” í—¤ë”ì—ì„œ í˜„ì¬ í˜ì´ì§€ ìë™ ê°ì§€:', {
                        href: window.location.href,
                        pathname: currentPath,
                        currentFile: currentFile
                    });

                    // ëª¨ë“  ë©”ë‰´ ì•„ì´í…œ ì°¾ê¸°
                    const menuItems = document.querySelectorAll('.menu a');
                    console.log('ğŸ“‹ ì°¾ì€ ë©”ë‰´ ì•„ì´í…œ ìˆ˜:', menuItems.length);

                    if (menuItems.length === 0) {
                        console.warn('âš ï¸ ë©”ë‰´ ì•„ì´í…œì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                        return;
                    }

                    // ëª¨ë“  ë©”ë‰´ ì•„ì´í…œì—ì„œ active í´ë˜ìŠ¤ ì œê±°
                    let removedCount = 0;
                    for (let i = 0; i < menuItems.length; i++) {
                        if (menuItems[i].classList.contains('active')) {
                            menuItems[i].classList.remove('active');
                            removedCount++;
                        }
                    }
                    console.log('ğŸ§¹ active í´ë˜ìŠ¤ ì œê±°ëœ ë©”ë‰´ ìˆ˜:', removedCount);

                    // í˜„ì¬ í˜ì´ì§€ì™€ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” ë©”ë‰´ ì°¾ê¸°
                    let foundMatch = false;
                    for (let i = 0; i < menuItems.length; i++) {
                        const item = menuItems[i];
                        const href = item.getAttribute('href');
                        
                        console.log(`ğŸ” ë©”ë‰´ ${i + 1} ê²€ì‚¬:`, {
                            href: href,
                            text: item.textContent.trim()
                        });
                        
                        if (href) {
                            const menuFile = href.split('/').pop();
                            const isMatch = menuFile === currentFile;
                            
                            console.log(`   ë§¤ì¹­ ê²€ì‚¬: ${menuFile} === ${currentFile} -> ${isMatch}`);
                            
                            if (isMatch) {
                                item.classList.add('active');
                                foundMatch = true;
                                
                                // ìŠ¤íƒ€ì¼ì´ ì‹¤ì œë¡œ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸
                                const computedStyle = window.getComputedStyle(item, '::after');
                                console.log('ğŸ¯ ë©”ë‰´ í™œì„±í™” ì™„ë£Œ:', {
                                    href: href,
                                    text: item.textContent.trim(),
                                    hasActiveClass: item.classList.contains('active'),
                                    afterWidth: computedStyle.width
                                });
                                break;
                            }
                        }
                    }

                    if (!foundMatch) {
                        console.warn('âš ï¸ í˜„ì¬ í˜ì´ì§€ì™€ ì¼ì¹˜í•˜ëŠ” ë©”ë‰´ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤');
                    }

                } catch (error) {
                    console.error('âŒ ë©”ë‰´ í•˜ì´ë¼ì´íŠ¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);
                }
            }

            bindEvents() {
                // ë¡œê·¸ì¸ ì„±ê³µ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
                window.addEventListener('userLoginSuccess', (e) => {
                    console.log('ğŸ“¡ ë¡œê·¸ì¸ ì„±ê³µ ì´ë²¤íŠ¸ ìˆ˜ì‹ :', e.detail);
                    this.updateHeaderState();
                });

                // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì´ë²¤íŠ¸
                document.addEventListener('click', (e) => {
                    if (e.target.matches('.logout-btn, .logout-dropdown-btn')) {
                        e.preventDefault();
                        this.handleLogout();
                    }
                });

                // ëª¨ë°”ì¼ ë©”ë‰´ ë²„íŠ¼ ì´ë²¤íŠ¸
                document.addEventListener('click', (e) => {
                    if (e.target.closest('.mobile-menu-button')) {
                        e.preventDefault();
                        e.stopPropagation();
                        const button = e.target.closest('.mobile-menu-button');
                        const menuType = button.getAttribute('data-menu-type');
                        this.toggleMobileMenu(menuType);
                    }
                });

                // ì™¸ë¶€ í´ë¦­ìœ¼ë¡œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.user-menu')) {
                        this.closeAllDropdowns();
                    }
                });

                // ì €ì¥ì†Œ ë³€ê²½ ê°ì§€ (ë‹¤ë¥¸ íƒ­ì—ì„œì˜ ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ)
                window.addEventListener('storage', (e) => {
                    if (e.key === 'userLoggedIn' || e.key === 'userNickname' || e.key === 'userType') {
                        console.log('ğŸ“¦ ì €ì¥ì†Œ ë³€ê²½ ê°ì§€:', e.key);
                        this.updateHeaderState();
                    }
                });
            }

            updateHeaderState() {
                const loginMenu = document.getElementById('loginMenu');
                const loggedInMenu = document.getElementById('loggedInMenu');
                
                // localStorageì™€ sessionStorage ëª¨ë‘ í™•ì¸
                const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true' || 
                                  sessionStorage.getItem('userLoggedIn') === 'true';
                
                console.log('ğŸ” ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸:', isLoggedIn);
                
                if (isLoggedIn) {
                    this.showLoggedInState(loginMenu, loggedInMenu);
                } else {
                    this.showLoggedOutState(loginMenu, loggedInMenu);
                }
            }

            showLoggedInState(loginMenu, loggedInMenu) {
                // ë©”ë‰´ í‘œì‹œ/ìˆ¨ê¹€ ì²˜ë¦¬
                if (loginMenu) {
                    loginMenu.style.display = 'none';
                    loginMenu.classList.add('hidden');
                }
                if (loggedInMenu) {
                    loggedInMenu.style.display = 'flex';
                    loggedInMenu.classList.remove('hidden');
                }
                
                // ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                const userNickname = localStorage.getItem('userNickname') || 
                                   sessionStorage.getItem('userNickname') || 'ì‚¬ìš©ì';
                const userType = localStorage.getItem('userType') || 
                                sessionStorage.getItem('userType') || 'user';
                
                const userTypeText = userType === 'politician' ? 'ì •ì¹˜ì¸' : 'ì¼ë°˜íšŒì›';
                
                // ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸
                this.updateUserInfo(userNickname, userTypeText, userType);
                
                console.log('âœ… ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ:', { userNickname, userType });
            }

            showLoggedOutState(loginMenu, loggedInMenu) {
                if (loginMenu) {
                    loginMenu.style.display = 'flex';
                    loginMenu.classList.remove('hidden');
                }
                if (loggedInMenu) {
                    loggedInMenu.style.display = 'none';
                    loggedInMenu.classList.add('hidden');
                }
                
                console.log('âœ… ë¡œê·¸ì•„ì›ƒ ìƒíƒœ í‘œì‹œ');
            }

            updateUserInfo(nickname, userTypeText, userType) {
                // PC ë²„ì „ ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸
                const usernameDisplay = document.getElementById('usernameDisplay');
                const userTypeDisplay = document.getElementById('userTypeText');
                const userIndicator = document.getElementById('userIndicator');
                
                if (usernameDisplay) usernameDisplay.textContent = nickname;
                if (userTypeDisplay) userTypeDisplay.textContent = userTypeText;
                
                // ì •ì¹˜ì¸/ì¼ë°˜íšŒì› êµ¬ë¶„ ìŠ¤íƒ€ì¼ ì ìš©
                if (userIndicator) {
                    userIndicator.classList.remove('politician', 'user');
                    userIndicator.classList.add(userType);
                }
                
                // ëª¨ë°”ì¼ ë“œë¡­ë‹¤ìš´ ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸
                const dropdownUsername = document.getElementById('dropdownUsername');
                const dropdownUsertype = document.getElementById('dropdownUsertype');
                if (dropdownUsername) dropdownUsername.textContent = nickname;
                if (dropdownUsertype) dropdownUsertype.textContent = userTypeText;
            }

            toggleMobileMenu(type) {
                console.log('ğŸ“± ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€:', type);
                
                const dropdownId = type === 'login' ? 'loginDropdown' : 'userDropdown';
                const dropdown = document.getElementById(dropdownId);
                
                if (!dropdown) {
                    console.error('âŒ ë“œë¡­ë‹¤ìš´ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ:', dropdownId);
                    return;
                }
                
                if (this.activeDropdown === dropdown) {
                    this.closeAllDropdowns();
                    return;
                }
                
                this.closeAllDropdowns();
                dropdown.classList.add('active');
                this.activeDropdown = dropdown;
            }

            closeAllDropdowns() {
                const dropdowns = document.querySelectorAll('.mobile-dropdown');
                for (let i = 0; i < dropdowns.length; i++) {
                    dropdowns[i].classList.remove('active');
                }
                this.activeDropdown = null;
            }

            handleLogout() {
                console.log('ğŸšª ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬');
                
                // ëª¨ë“  ì €ì¥ì†Œì—ì„œ ë¡œê·¸ì¸ ì •ë³´ ì œê±°
                const keysToRemove = ['userLoggedIn', 'userType', 'userEmail', 'userNickname'];
                keysToRemove.forEach(key => {
                    localStorage.removeItem(key);
                    sessionStorage.removeItem(key);
                });
                
                // í—¤ë” ìƒíƒœ ì—…ë°ì´íŠ¸
                this.updateHeaderState();
                
                // ë¡œê·¸ì•„ì›ƒ ì´ë²¤íŠ¸ ë°œìƒ
                window.dispatchEvent(new CustomEvent('userLogout'));
                
                // ë©”ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 500);
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            // ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
            if (window.headerManager) {
                console.log('âš ï¸ í—¤ë” ê´€ë¦¬ìê°€ ì´ë¯¸ ì¡´ì¬í•¨, ì¤‘ë³µ ìƒì„± ë°©ì§€');
                return;
            }
            
            window.headerManager = new UnifiedHeaderManager();
            
            // ì „ì—­ìœ¼ë¡œ ë…¸ì¶œ (ê¸°ì¡´ ì½”ë“œì™€ì˜ í˜¸í™˜ì„±)
            window.GlobalHeaderManager = window.headerManager;
            
            console.log('âœ… ì¤‘ë³µ ë°©ì§€ í—¤ë” ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ');
        });
        
    })(); // IIFEë¡œ ìŠ¤ì½”í”„ ë¶„ë¦¬
  </script>
</body>
</html>