# CLAUDE_KO.md

이 파일은 Claude Code(claude.ai/code)가 이 저장소에서 작업할 때 참조하는 가이드입니다.

## 📄 파일 동기화

**필수**: CLAUDE.md 파일을 수정할 때는 반드시 CLAUDE_KO.md 파일도 함께 수정하여 두 파일 간의 동기화를 유지해야 합니다. 두 파일은 각각의 언어로 동일한 정보를 포함해야 합니다.

**중요**: 이 파일(CLAUDE_KO.md)이 수정되면 CLAUDE.md도 함께 업데이트하여 영문/한글 버전이 항상 동일한 내용을 유지하도록 합니다.

## 🚀 Claude Code 베스트 프랙티스

### 코드 작업 워크플로우
모든 코딩 작업에 다음 구조화된 접근법 사용:
1. **탐색**: Read/Glob/Grep 도구로 관련 파일 읽고 이해하기
2. **계획**: TodoWrite 도구로 상세한 구현 계획 작성
3. **구현**: 프로젝트 패턴을 따라 코드 작성
4. **검증**: 구현 테스트 및 엣지 케이스 확인
5. **커밋**: 명확한 한글 메시지로 의미 있는 커밋 생성

### 효과적인 도구 사용법
- **먼저 검색**: 새 코드 생성 전 항상 기존 구현 검색
- **배치 작업**: 관련 파일 읽을 때 여러 도구를 병렬로 호출
- **컨텍스트 관리**: 컨텍스트가 너무 커지면 `/clear` 명령 사용
- **시각적 검증**: UI 변경 시 필요하면 스크린샷 요청

### 코드 생성 가이드라인
- **패턴 준수**: 항상 기존 코드 스타일과 패턴 일치
- **안전 우선**: 옵셔널 체이닝과 기본값 일관되게 사용
- **테스트 커버리지**: 새 기능에 대한 테스트 작성
- **점진적 변경**: 대규모 재작성보다 작고 집중된 변경

### 성능 팁
- **병렬 처리**: 효율성을 위해 단일 응답에서 여러 도구 호출
- **집중된 컨텍스트**: 관련 파일만 컨텍스트에 유지
- **스마트 탐색**: 수동 탐색 대신 Grep/Glob으로 파일 찾기

### 테스팅 베스트 프랙티스
- **TDD 접근법**: 새 기능 추가 시 구현 전 테스트 먼저 작성
- **빈번한 테스트 실행**: 중요한 변경 후마다 테스트 실행
- **시각적 테스팅**: 스크린샷으로 UI 컴포넌트 검증
- **엣지 케이스**: 항상 경계 조건과 오류 상태 테스트

## 개발 명령어

```bash
# 의존성 설치
npm install

# 개발 서버 실행
npm start
# http://localhost:3000 에서 실행됨
# 홈페이지 경로: /backoffice

# 프로덕션 빌드
npm run build

# 테스트 실행
npm run test

# 특정 테스트 파일 실행
npm test -- PostsManagementPage.test.tsx --watch
```

## 프로젝트 아키텍처

### 기술 스택
- **React 19** + TypeScript 4.9
- **React Router v7** (라우팅)
- **Tailwind CSS v3.4** (중요: v4로 업그레이드 금지)
- **Chart.js** + react-chartjs-2 (분석 차트)
- **Lucide React** (아이콘)

### 디렉토리 구조
- `src/components/` - 재사용 가능한 컴포넌트 (Layout, 팝업들)
- `src/pages/` - 각 라우트의 페이지 컴포넌트
- `src/types/` - TypeScript 타입 정의 및 비즈니스 타입
- `src/utils/` - 유틸리티 함수 (네비게이션 헬퍼)

### 핵심 비즈니스 타입 (src/types/business.types.ts)
애플리케이션은 고정 6자리 접두사를 사용하는 표준화된 ID 체계 사용:
- 회원: NM(일반), PM(정치인), PA(보좌진)
- 콘텐츠: FB(자유게시판), PB(정치인게시판), CM(댓글)
- 관리: VP(투표), NT(공지), PU(팝업), BN(배너)

### 컴포넌트 패턴

#### 페이지 레이아웃 구조 (필수 순서)
모든 목록 페이지는 반드시 다음 순서를 따라야 함:
1. 페이지 헤더 (제목과 액션 버튼)
2. 통계 카드 (클릭 가능한 필터)
3. 검색 및 필터 컨트롤
4. 결과를 표시하는 데이터 테이블

#### 팝업 컴포넌트
모든 상세 팝업은 일관된 패턴 따름:
- `src/components/popups/` 위치
- `onClose` 콜백과 데이터 객체를 props로 받음
- 중앙 정렬된 콘텐츠와 모달 오버레이 사용
- 우측 상단에 닫기 버튼(X) 포함

#### 데이터 안전성 패턴
항상 옵셔널 체이닝과 기본값 사용:
```typescript
// undefined 안전성을 위한 필수 패턴
const value = data?.property || defaultValue;
const items = Array.isArray(data) && data.length > 0 ? data : [];
const color = colorMapping[key as keyof typeof colorMapping] || defaultColor;
```

### 네비게이션 유틸리티
페이지 간 파라미터 전달 시 `src/utils/navigation.ts` 사용:
```typescript
import { navigateToPage } from '../utils/navigation';
navigateToPage('/members', { type: '정치인', status: '승인' });
```

### 핵심 개발 규칙

#### Tailwind CSS 버전 고정
- **반드시 v3.4.x 사용** - v4는 호환성 문제 발생
- CSS 오류 시 확인: package.json의 `"tailwindcss": "~3.4.0"`

#### 한국어 UI/UX 표준
- 모든 UI 텍스트는 한국어
- 날짜 형식: YYYY-MM-DD
- 상태 값은 한국어 사용 (승인, 대기, 삭제 등)

#### 필터 구현 체크리스트
필터 추가 시 항상 세 가지를 동시에 구현:
1. State 변수와 setter
2. "적용된 필터" 섹션에 표시
3. 초기화 로직에 포함

#### 카드 클릭 로직 표준
통계 카드는 적절한 필터링 적용해야 함:
- 회원 유형 카드: 정치인/보좌진은 `statusFilter('승인')` 설정
- 상태 카드: 유형 필터를 '전체'로 초기화
- 항상 검색어, 날짜, 페이지네이션 초기화

## 주요 작업

### 새 페이지 추가
1. `src/pages/`에 컴포넌트 생성
2. `src/App.tsx`에 라우트 추가
3. `src/components/Layout.tsx` 네비게이션 배열에 메뉴 항목 추가

### 페이지 간 네비게이션 구현
"클릭하여 필터와 함께 이동" 구현 시:
1. 소스 페이지: URL 파라미터를 포함한 handleClick 생성
2. 대상 페이지: URLSearchParams 파싱하는 useEffect 추가
3. 대상 페이지: 받은 파라미터를 필터 상태에 적용
4. 검증: 클릭 → 이동 → 필터 → 결과의 전체 사용자 플로우

### 날짜 기간 필터
모든 페이지에서 일관된 표준 기간 정의:
- 일간: 오늘만 (시작일 = 종료일 = 오늘)
- 주간: 지난 7일
- 월간: 지난 1개월
- 연간: 지난 1년

## 테스트 접근법
- Jest와 React Testing Library 사용
- 컴포넌트 옆에 테스트 파일 (*.test.tsx)
- 특정 테스트 실행: `npm test -- [filename] --watch`

## 중요 경고사항

### 파일 안전성
- 절대 쉘 정규식/sed로 대량 파일 수정 금지
- 파일 변경은 Edit 도구만 사용
- 대용량 파일(1000줄 이상)은 섹션별로 수정

### 비즈니스 로직 일관성
- 새 로직 생성 전 항상 기존 구현 검색
- 확립된 패턴과의 일관성 유지
- 유사한 기능 구현 시 기존 페이지 참조

### 필수 검증사항
작업 완료 전 반드시 확인:
- 모든 옵셔널 체이닝 적용 여부
- 한국어 텍스트 일관성
- 필터가 UI와 제대로 연결되었는지
- 페이지 간 네비게이션 완전 작동
- 카드 레이아웃이 표준 순서 준수

## 정치방망이(PoliBAT) 비즈니스 규칙

### 프로젝트 정보
- **도메인**: www.polibat.com
- **미션**: 국민과 정치인이 부담 없이 소통하는 플랫폼
- **타겟**: 386세대 이후 중심
- **현재 단계**: 프론트엔드 개발 (백엔드 제외)

### 주요 메뉴 구조
1. **자유게시판**: 모든 사용자의 자유로운 의견 교환
2. **정치인게시판**: 정치인 지목 글 작성 및 답변
3. **투표**: 유쾌한 정치 관련 투표

### 상태 코드 체계
- **회원 상태**: 승인, 승인대기, 탈퇴, 정지, 강퇴
- **게시글 상태**: 게시, 게시(고정), 숨김, 삭제
- **투표 상태**: 진행, 마감, 예정
- **조치 상태**: 접수대기, 검토중, 처리완료, 처리불가, 추후검토

### 구분값
- **정치인 유형**: 국회의원, 지자체, 대통령실
- **회원 유형**: 일반회원, 정치인, 보좌진, 운영자
- **공지 말머리**: 이용안내, 업데이트, 소통소식, 외부활동
- **불편/제안 유형**: 기능제안, 불편사항, 투표제안