<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="polibat Website Template by freehtml5.co" />
  <meta name="keywords" content="free website templates, polibat, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
  <meta name="author" content="freehtml5.co" />

  <!-- Facebook and Twitter integration -->
  <meta property="og:title" content=""/>
  <meta property="og:image" content=""/>
  <meta property="og:url" content=""/>
  <meta property="og:site_name" content=""/>
  <meta property="og:description" content=""/>
  <meta name="twitter:title" content="" />
  <meta name="twitter:image" content="" />
  <meta name="twitter:url" content="" />
  <meta name="twitter:card" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:300,400" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic" rel="stylesheet">

  <!-- Animate.css -->
  <link rel="stylesheet" href="css/animate.css">
  <!-- Icomoon Icon Fonts-->
  <link rel="stylesheet" href="css/icomoon.css">
  <!-- Bootstrap  -->
  <link rel="stylesheet" href="css/bootstrap.css">

  <!-- Magnific Popup -->
  <link rel="stylesheet" href="css/magnific-popup.css">

  <!-- Owl Carousel  -->
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">

  <!-- Flexslider  -->
  <link rel="stylesheet" href="css/flexslider.css">

  <!-- Pricing -->
  <link rel="stylesheet" href="css/pricing.css">

  <!-- Theme style  -->
  <link rel="stylesheet" href="css/style.css">

  <!-- Modernizr JS -->
  <script src="js/modernizr-2.6.2.min.js"></script>

  <!-- Toast UI Editor ìŠ¤íƒ€ì¼ ë° ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ -->
  <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css">
  <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
  <script src="https://uicdn.toast.com/editor/latest/i18n/ko.js"></script>

  <!-- FOR IE9 below -->
  <!--[if lt IE 9]>
  <script src="js/respond.min.js"></script>
  <![endif]-->
  <title>ì •ì¹˜ì¸ê²Œì‹œíŒ - ê¸€ì“°ê¸°</title>
  <style>
    .board-container {
      max-width: 1200px;
      margin: auto;
      background: #fff;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      width: 100%;
       margin: 40px auto 30px;
    }
    
    .login-required-message {
      text-align: center;
      padding: 60px 20px;
      color: #666;
      background: #f8f9fa;
      border-radius: 12px;
      margin: 40px auto;
    }
    
    .login-required-message h3 {
      color: #333;
      margin-bottom: 16px;
    }
    
    .login-button {
      display: inline-block;
      padding: 12px 24px;
      background-color: #000;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      margin-top: 16px;
      transition: background-color 0.3s;
    }
    
    .login-button:hover {
      background-color: #333;
      text-decoration: none;
      color: white;
    }
    
    h2 {
      margin-top: 0;
      font-size: 1.8em;
      margin-bottom: 10px;
    }
    
    p.description {
      color: #666;
      font-size: 0.95em;
      margin-bottom: 24px;
    }
    
    label {
      display: block;
      margin: 12px 0 6px;
      font-weight: bold;
    }
    
    input[type="text"],
    textarea,
    select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-sizing: border-box;
      font-size: 14px;
    }
    
    input:focus,
    textarea:focus,
    select:focus {
      border-color: #007bff;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.15);
    }
    
    textarea {
      resize: vertical;
      min-height: 180px;
    }
    
    .form-actions {
      margin-top: 20px;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }
    
    .write-button {
      padding: 10px 20px;
      background-color: #000;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .write-button:hover {
      background-color: #333;
    }
    
    .cancel-button {
      background-color: #6c757d;
      color: white;
    }
    
    .cancel-button:hover {
      background-color: #5a6268;
    }

    /* ì •ì¹˜ì¸ ì„ íƒ ì„¹ì…˜ */
    .politician-section {
      background: #f8f9fa;
      padding: 16px;
      border-radius: 8px;
      margin: 16px 0;
    }

    .politician-section label {
      color: #333;
      font-size: 14px;
      margin-bottom: 8px;
      font-weight: bold;
    }

    .politician-search-wrapper {
      position: relative;
      margin-bottom: 7px;
    }

    .politician-search {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
      background: white;
      color: #333;
      box-sizing: border-box;
    }

    .politician-search:focus {
      border-color: #007bff;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.15);
    }

    .politician-dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      max-height: 300px;
      overflow-y: auto;
      z-index: 10;
      margin-top: 4px;
    }

    .politician-item {
      display: flex;
      align-items: center;
      padding: 8px 12px;
      cursor: pointer;
      border-bottom: 1px solid #f0f0f0;
      transition: background-color 0.2s;
    }

    .politician-item:hover {
      background-color: #f8f9fa;
    }

    .politician-item:last-child {
      border-bottom: none;
    }

    /* ==================== ì •ì¹˜ì¸ ëª…í•¨ ì¹´ë“œ í¼ ìŠ¤íƒ€ì¼ ==================== */
    
    .politician-card-section {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border: 1px solid #dee2e6;
      border-radius: 12px;
      padding: 24px;
      margin: 20px 0;
      position: relative;
      overflow: hidden;
    }

    .politician-card-section::before {
      content: "ğŸ›ï¸";
      position: absolute;
      top: 16px;
      right: 20px;
      font-size: 24px;
      opacity: 0.1;
    }

    .politician-card-section h3 {
      color: #1a1a1a;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-description {
      color: #666;
      font-size: 14px;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .politician-card-form {
      background: white;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e9ecef;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-row:last-child {
      margin-bottom: 0;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      font-weight: 600;
      color: #495057;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      padding: 10px 12px;
      border: 1px solid #ced4da;
      border-radius: 6px;
      font-size: 14px;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
      background: white;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #4a90e2;
      box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
    }

    .form-group small {
      color: #6c757d;
      font-size: 12px;
      margin-top: 4px;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 60px;
    }

    /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      .form-row {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .politician-card-section {
        padding: 20px;
        margin: 16px 0;
      }

      .politician-card-form {
        padding: 16px;
      }
    }

    .politician-photo {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 10px;
      border: 2px solid #e9ecef;
      flex-shrink: 0;
    }

    .politician-info {
      flex: 1;
      min-width: 0;
    }

    .politician-name {
      font-weight: bold;
      color: #333;
      font-size: 13px;
      margin-bottom: 2px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .politician-party {
      color: #666;
      font-size: 11px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .politician-position {
      color: #888;
      font-size: 10px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .selected-politician {
      display: flex;
      align-items: center;
      background: white;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }

    .selected-politician-photo {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 16px;
      border: 2px solid #e9ecef;
    }

    .selected-politician-info {
      flex: 1;
    }

    .selected-politician-name {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 4px;
      color: #333;
    }

    .selected-politician-details {
      font-size: 13px;
      color: #666;
    }

    .change-politician-btn {
      background: #6c757d;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .change-politician-btn:hover {
      background: #5a6268;
    }

    .politician-notice {
      font-size: 12px;
    }
    
    /* ì •ì¹˜ì¸ íšŒì›ìš© ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ */
    .politician-disabled {
      opacity: 0.6;
      background: #f8f9fa !important;
      border: 1px solid #dee2e6 !important;
      cursor: not-allowed;
    }
    
    .disabled-indicator {
      background: #6c757d;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: bold;
      margin-left: 12px;
    }
    
    .politician-disabled-notice {
      color: #6c757d;
      background: #f8f9fa;
      padding: 8px 0px;
      border-radius: 6px;
    }

    .no-politician-option {
      padding: 12px 16px;
      text-align: center;
      color: #666;
      font-style: italic;
      border-bottom: 1px solid #f0f0f0;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .no-politician-option:hover {
      background-color: #f8f9fa;
    }
    
    .district-section {
      background: #f8f9fa;
      padding: 16px;
      border-radius: 8px;
      margin: 16px 0;
    }
    
    .district-visibility-section {
      margin-top: 12px;
      padding-top: 12px;
    }
    
    .visibility-options {
      display: flex;
      flex-direction: row;
      gap: 16px;
      margin-top: 6px;
    }
    
    .radio-option {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border: 1px solid #e9ecef;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      background: white;
      margin: 0 !important;
      font-weight: normal !important;
      flex: 1;
      justify-content: center;
    }
    
    .radio-option:hover {
      border-color: #007bff;
      background: #f8f9ff;
    }
    
    .radio-option input[type="radio"] {
      display: none;
    }
    
    .radio-custom {
      width: 16px;
      height: 16px;
      border: 2px solid #dee2e6;
      border-radius: 50%;
      background: white;
      position: relative;
      flex-shrink: 0;
    }
    
    .radio-option input[type="radio"]:checked + .radio-custom {
      border-color: #007bff;
      background: #007bff;
    }
    
    .radio-option input[type="radio"]:checked + .radio-custom::after {
      content: '';
      width: 6px;
      height: 6px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    .radio-option input[type="radio"]:checked ~ .option-text strong {
      color: #007bff;
    }
    
    .option-text strong {
      font-size: 13px;
      color: #333;
      transition: color 0.2s ease;
    }
    
    .visibility-help {
      display: block;
      margin-top: 8px;
      color: #666;
      font-size: 12px;
      line-height: 1.4;
    }
    
    .autocomplete-wrapper {
      position: relative;
    }

    .autocomplete-items {
      position: absolute;
      background: white;
      max-height: 200px;
      overflow-y: auto;
      border-radius: 6px;
      z-index: 10;
      width: 100%;
      margin-top: 4px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .autocomplete-item {
      padding: 10px;
      cursor: pointer;
      border-bottom: 1px solid #eee;
    }

    .autocomplete-item:hover {
      background-color: #f1f1f1;
    }
    
    .autocomplete-item:last-child {
      border-bottom: none;
    }
    
    @media (max-width: 768px) {
      .board-container {
        margin: 20px 16px 15px 16px;
        padding-left: 16px;
        padding-right: 16px;
      }
      .form-actions {
        flex-direction: column;
        align-items: stretch;
      }
      .write-button {
        width: 100%;
      }
      
      .selected-politician {
        flex-direction: column;
        text-align: center;
      }
      
      .selected-politician-photo {
        margin-right: 0;
        margin-bottom: 12px;
      }
    }
    
    .toastui-editor-defaultUI {
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      margin-bottom: 20px;
    }
    
    /* í•˜ë‹¨ ì‚¬ì§„ ì²¨ë¶€ ìˆ¨ê¹€ */
    #drop-area,
    #imagePreview,
    label[for="imageInput"] {
      display: none !important;
    }
  </style>
</head>
<body>
  <!-- í—¤ë” ë¡œë”© -->
  <div id="header-include"></div>
  
  <div id="wrap"> 
    <div class="board-container">
      <!-- ê¸€ì“°ê¸° í¼ -->
      <div id="writeFormContainer">
          <h2>ì •ì¹˜ì¸ê²Œì‹œíŒ ê¸€ì“°ê¸°</h2>
          <p class="description">ì†Œí†µí•˜ê³  ì‹¶ì€ ë‚´ìš©ì„ ììœ ë¡­ê²Œ ì‘ì„±í•´ë³´ì„¸ìš”. ê²Œì‹œê¸€ì€ ë“±ë¡ í›„ ì •ì¹˜ì¸ê²Œì‹œíŒì— í‘œì‹œë©ë‹ˆë‹¤.</p>
          
          <form id="writeForm">
            <!-- ì†Œí†µëŒ€ìƒ ì •ì¹˜ì¸ ì„ íƒ -->
            <div class="politician-section">
              <label for="politicianSearch">ì†Œí†µëŒ€ìƒ ì •ì¹˜ì¸ ì„ íƒ <span style="font-weight: normal; color: #999;">(ì„ íƒì‚¬í•­)</span></label>
              
              <!-- ì¼ë°˜íšŒì›/ë³´ì¢Œì§„íšŒì›ìš© ì„ íƒ ì¸í„°í˜ì´ìŠ¤ -->
              <div id="normalUserInterface">
                <div id="politicianSearchContainer">
                  <div class="politician-search-wrapper">
                    <input type="text" id="politicianSearch" class="politician-search" 
                           placeholder="ì •ì¹˜ì¸ ì´ë¦„ì„ ì…ë ¥í•˜ê±°ë‚˜ ê²€ìƒ‰í•˜ì„¸ìš” (í´ë¦­í•˜ë©´ ëª©ë¡ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤)" autocomplete="off">
                    <div id="politicianDropdown" class="politician-dropdown" style="display: none;"></div>
                  </div>
                </div>
                
                <div id="selectedPoliticianContainer" style="display: none;">
                  <div class="selected-politician">
                    <img id="selectedPoliticianPhoto" class="selected-politician-photo" src="" alt="">
                    <div class="selected-politician-info">
                      <div id="selectedPoliticianName" class="selected-politician-name"></div>
                      <div id="selectedPoliticianDetails" class="selectedPolitician-details"></div>
                    </div>
                    <button type="button" class="change-politician-btn" onclick="changePolitician()">ë³€ê²½</button>
                  </div>
                </div>
                
                <div class="politician-notice">
                  â€» ì†Œí†µëŒ€ìƒ ì •ì¹˜ì¸ ì‚¬ì§„ì´ ê²Œì‹œê¸€ì— í•¨ê»˜ í‘œì‹œë©ë‹ˆë‹¤.
                </div>
              </div>
              
              <!-- ì •ì¹˜ì¸íšŒì›ìš© ìë™ì„ íƒ ì¸í„°í˜ì´ìŠ¤ -->
              <div id="politicianUserInterface" style="display: none;">
                <div class="selected-politician politician-disabled">
                  <img id="autoSelectedPoliticianPhoto" class="selected-politician-photo" src="" alt="">
                  <div class="selected-politician-info">
                    <div id="autoSelectedPoliticianName" class="selected-politician-name"></div>
                    <div id="autoSelectedPoliticianDetails" class="selected-politician-details"></div>
                  </div>
                  <div class="disabled-indicator">ìë™ ì„¤ì •</div>
                </div>
                
                <div class="politician-notice politician-disabled-notice">
                  â€» ì •ì¹˜ì¸ ê³„ì •ì€ ì†Œí†µëŒ€ìƒì„ ì„ íƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ë³¸ì¸ìœ¼ë¡œ ìë™ ì„¤ì •ë©ë‹ˆë‹¤)
                </div>
              </div>
              
              <input type="hidden" id="selectedPoliticianId" name="politicianId">
            </div>

            <!-- ì§€ì—­êµ¬ ì„ íƒ ë° ê³µê°œ/ë¹„ê³µê°œ ì„¤ì • -->
            <div class="district-section d0">
              <label for="district">ì§€ì—­êµ¬ ì„ íƒ</label>
              <div class="autocomplete-wrapper" style="position: relative; margin-bottom: 12px;">
                <input type="text" id="district" placeholder="ì§€ì—­êµ¬ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”" autocomplete="off" required>
                <div id="autocomplete-list" class="autocomplete-items"></div>
              </div>
              <div class="district-visibility-section">
                <label style="margin: 8px 0 6px; font-weight: bold;">ì§€ì—­êµ¬ ê³µê°œ ì„¤ì •</label>
                <div class="visibility-options">
                  <label class="radio-option">
                    <input type="radio" name="districtVisibility" value="public" checked>
                    <span class="radio-custom"></span>
                    <span class="option-text">
                      <strong>ê³µê°œ</strong>
                    </span>
                  </label>
                  <label class="radio-option">
                    <input type="radio" name="districtVisibility" value="private">
                    <span class="radio-custom"></span>
                    <span class="option-text">
                      <strong>ë¹„ê³µê°œ</strong>
                    </span>
                  </label>
                </div>
                <small class="visibility-help">ê³µê°œ: ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ì´ ë‚´ ì§€ì—­êµ¬ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤ | ë¹„ê³µê°œ: ì§€ì—­êµ¬ ì •ë³´ê°€ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤</small>
              </div>
            </div>
            
            <label for="title">ì œëª©</label>
            <input type="text" id="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required>

            <label for="editor">ë‚´ìš©</label>
            <div id="editor"></div>
            <input type="hidden" id="hiddenContent" name="content">

            <!-- ìˆ¨ê²¨ì§„ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜ì—­ -->
            <div id="drop-area" class="drop-area" style="display:none;">
              <p>ì´ê³³ì— ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš” (ìµœëŒ€ 5ì¥)</p>
              <input type="file" id="imageInput" multiple accept="image/*" hidden>
            </div>
            <div id="imagePreview" class="image-preview"></div>

            <div class="form-actions">
              <button type="submit" class="write-button">ë“±ë¡í•˜ê¸°</button>
              <button type="button" class="write-button cancel-button" onclick="history.back()">ì·¨ì†Œ</button>
            </div>
          </form>
        </div>
    </div>
  </div>
  
  <!-- í‘¸í„° ë¡œë”© -->
  <div id="footer-include"></div>

  <script>
    // ì§€ì—­êµ¬ ëª©ë¡ ë°ì´í„°
    const districts = [
      "ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ìš©ì‚°êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ì„±ë™êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ê´‘ì§„êµ¬",
      "ì„œìš¸íŠ¹ë³„ì‹œ ë™ëŒ€ë¬¸êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘ë‘êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ì„±ë¶êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë¶êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ë„ë´‰êµ¬",
      "ì„œìš¸íŠ¹ë³„ì‹œ ë…¸ì›êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ì€í‰êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ì„œëŒ€ë¬¸êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ì–‘ì²œêµ¬",
      "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ì„œêµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ êµ¬ë¡œêµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ê¸ˆì²œêµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ì˜ë“±í¬êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ë™ì‘êµ¬",
      "ì„œìš¸íŠ¹ë³„ì‹œ ê´€ì•…êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ì„œì´ˆêµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ì†¡íŒŒêµ¬", "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë™êµ¬",
      "ë¶€ì‚°ê´‘ì—­ì‹œ ì¤‘êµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ì„œêµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ë™êµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ì˜ë„êµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ë¶€ì‚°ì§„êµ¬",
      "ë¶€ì‚°ê´‘ì—­ì‹œ ë™ë˜êµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ë‚¨êµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ë¶êµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ í•´ìš´ëŒ€êµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ì‚¬í•˜êµ¬",
      "ë¶€ì‚°ê´‘ì—­ì‹œ ê¸ˆì •êµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ê°•ì„œêµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ì—°ì œêµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ìˆ˜ì˜êµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ì‚¬ìƒêµ¬", "ë¶€ì‚°ê´‘ì—­ì‹œ ê¸°ì¥êµ°"
    ];

    // ì •ì¹˜ì¸ ë°ì´í„° (ê°€ë‚˜ë‹¤ìˆœìœ¼ë¡œ ì •ë ¬ëœ ì‹¤ì œ ë°ì´í„°)
    const politicians = [
      {
        id: 1,
        name: "ê°•ê¸°ì •",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "ê´‘ì£¼ê´‘ì—­ì‹œì¥",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ê°•ê¸°ì •"
      },
      {
        id: 2,
        name: "ê¹€ê±´í¬",
        party: "ë¬´ì†Œì†",
        position: "ì˜ë¶€ì¸",
        photo: "https://via.placeholder.com/100x100/9B59B6/FFFFFF?text=ê¹€ê±´í¬"
      },
      {
        id: 3,
        name: "ê¹€ê¸°í˜„",
        party: "êµ­ë¯¼ì˜í˜",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ê¹€ê¸°í˜„"
      },
      {
        id: 4,
        name: "ê¹€ë™ì—°",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "ê²½ê¸°ë„ì§€ì‚¬",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ê¹€ë™ì—°"
      },
      {
        id: 5,
        name: "ê¹€ë¯¼ì„",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ê¹€ë¯¼ì„"
      },
      {
        id: 6,
        name: "ê¹€ì˜í™˜",
        party: "êµ­ë¯¼ì˜í˜",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ê¹€ì˜í™˜"
      },
      {
        id: 7,
        name: "ê¹€íƒœë…„",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ê¹€íƒœë…„"
      },
      {
        id: 8,
        name: "ë°•ë¯¼ì‹",
        party: "êµ­ë¯¼ì˜í˜",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ë°•ë¯¼ì‹"
      },
      {
        id: 9,
        name: "ë°•ì„±ì¤€",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ë°•ì„±ì¤€"
      },
      {
        id: 10,
        name: "ë°•ì§€ì›",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ë°•ì§€ì›"
      },
      {
        id: 11,
        name: "ì„œë²”ìˆ˜",
        party: "êµ­ë¯¼ì˜í˜",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ì„œë²”ìˆ˜"
      },
      {
        id: 12,
        name: "ì‹¬ìƒì •",
        party: "ì •ì˜ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/1ABC9C/FFFFFF?text=ì‹¬ìƒì •"
      },
      {
        id: 13,
        name: "ì•ˆì² ìˆ˜",
        party: "êµ­ë¯¼ì˜ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/F39C12/FFFFFF?text=ì•ˆì² ìˆ˜"
      },
      {
        id: 14,
        name: "ì˜¤ì„¸í›ˆ",
        party: "êµ­ë¯¼ì˜í˜",
        position: "ì„œìš¸íŠ¹ë³„ì‹œì¥",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ì˜¤ì„¸í›ˆ"
      },
      {
        id: 15,
        name: "ìœ¤ì„ì—´",
        party: "êµ­ë¯¼ì˜í˜",
        position: "ëŒ€í†µë ¹",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ìœ¤ì„ì—´"
      },
      {
        id: 16,
        name: "ì´ë‚™ì—°",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ì´ë‚™ì—°"
      },
      {
        id: 17,
        name: "ì´ì¬ëª…",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "ëŒ€í‘œ",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ì´ì¬ëª…"
      },
      {
        id: 18,
        name: "ì´ì¤€ì„",
        party: "ë¬´ì†Œì†",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/95A5A6/FFFFFF?text=ì´ì¤€ì„"
      },
      {
        id: 19,
        name: "ì´ì² ê·œ",
        party: "êµ­ë¯¼ì˜í˜",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ì´ì² ê·œ"
      },
      {
        id: 20,
        name: "ì„ì¢…ì„±",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ì„ì¢…ì„±"
      },
      {
        id: 21,
        name: "ì¥ê²½íƒœ",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ì¥ê²½íƒœ"
      },
      {
        id: 22,
        name: "ì •ì²­ë˜",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ì •ì²­ë˜"
      },
      {
        id: 23,
        name: "ì¡°êµ­",
        party: "ì¡°êµ­í˜ì‹ ë‹¹",
        position: "ëŒ€í‘œ",
        photo: "https://via.placeholder.com/100x100/8E44AD/FFFFFF?text=ì¡°êµ­"
      },
      {
        id: 24,
        name: "ì§„ì˜",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ì§„ì˜"
      },
      {
        id: 25,
        name: "ìµœë¯¼í¬",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=ìµœë¯¼í¬"
      },
      {
        id: 26,
        name: "ì¶”ê²½í˜¸",
        party: "êµ­ë¯¼ì˜í˜",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ì¶”ê²½í˜¸"
      },
      {
        id: 27,
        name: "í•œë™í›ˆ",
        party: "êµ­ë¯¼ì˜í˜",
        position: "ëŒ€í‘œ",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=í•œë™í›ˆ"
      },
      {
        id: 28,
        name: "í—ˆì€ì•„",
        party: "êµ­ë¯¼ì˜í˜",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=í—ˆì€ì•„"
      },
      {
        id: 29,
        name: "í™ì¤€í‘œ",
        party: "êµ­ë¯¼ì˜í˜",
        position: "ëŒ€êµ¬ê´‘ì—­ì‹œì¥",
        photo: "https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=í™ì¤€í‘œ"
      },
      {
        id: 30,
        name: "í™©í¬",
        party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
        position: "êµ­íšŒì˜ì›",
        photo: "https://via.placeholder.com/100x100/E74C3C/FFFFFF?text=í™©í¬"
      }
    ];

    let selectedPolitician = null;

    // ì´ˆê¸°í™” í•¨ìˆ˜
    function initializePage() {
      console.log('âœ… ì •ì¹˜ì¸ ì†Œí†µ ê¸€ì“°ê¸° í˜ì´ì§€ ì´ˆê¸°í™”');
      
      // ì§€ì—­êµ¬ ì…ë ¥ í•„ë“œì— ê¸°ë³¸ê°’ ì„¤ì •
      const defaultDistrict = 'ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬';
      document.getElementById('district').value = defaultDistrict;
      
      initializeEditor();
      initializeDistrictAutocomplete();
      initializePoliticianSearch();
      
      // ë¡œê·¸ì¸ íƒ€ì…ì— ë”°ë¥¸ ì •ì¹˜ì¸ ì„ íƒ ì¸í„°í˜ì´ìŠ¤ ì„¤ì •
      setupPoliticianInterface();
      
      // ëª…í•¨ ì¹´ë“œ í¼ ì´ˆê¸°í™”
      togglePoliticianCardForm();
    }
    
    // ë¡œê·¸ì¸ íƒ€ì…ì— ë”°ë¥¸ ì •ì¹˜ì¸ ì„ íƒ ì¸í„°í˜ì´ìŠ¤ ì„¤ì •
    function setupPoliticianInterface() {
      // ë¡œê·¸ì¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ê°€ì ¸ì™€ì•¼ í•¨)
      const userInfo = getUserInfo();
      
      if (userInfo && userInfo.userType === 'politician') {
        // ì •ì¹˜ì¸ íšŒì›ì¸ ê²½ìš°
        showPoliticianUserInterface(userInfo);
      } else {
        // ì¼ë°˜íšŒì› ë˜ëŠ” ë³´ì¢Œì§„íšŒì›ì¸ ê²½ìš°
        showNormalUserInterface();
      }
    }
    
    // ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    function getUserInfo() {
      // localStorageë‚˜ sessionStorageì—ì„œ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      const userInfo = localStorage.getItem('userInfo') || sessionStorage.getItem('userInfo');
      if (userInfo) {
        try {
          return JSON.parse(userInfo);
        } catch (e) {
          console.error('ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì˜¤ë¥˜:', e);
        }
      }
      
      // ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì´ë©”ì¼ í™•ì¸
      const userEmail = localStorage.getItem('userEmail') || sessionStorage.getItem('userEmail');
      
      if (userEmail === 'politician@example.com') {
        // ì •ì¹˜ì¸ íšŒì› ì •ë³´
        return {
          userType: 'politician',
          email: 'politician@example.com',
          politicianId: 15, // ìœ¤ì„ì—´ ëŒ€í†µë ¹
          name: 'ìœ¤ì„ì—´',
          party: 'êµ­ë¯¼ì˜í˜',
          position: 'ëŒ€í†µë ¹',
          photo: 'https://via.placeholder.com/100x100/4A90E2/FFFFFF?text=ìœ¤ì„ì—´'
        };
      } else if (userEmail === 'test@example.com') {
        // ì¼ë°˜íšŒì› ì •ë³´
        return {
          userType: 'normal',
          email: 'test@example.com'
        };
      }
      
      // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ê²½ìš° ë˜ëŠ” ë‹¤ë¥¸ ì´ë©”ì¼
      return null;
    }
    
    // ì •ì¹˜ì¸ íšŒì›ìš© ì¸í„°í˜ì´ìŠ¤ í‘œì‹œ
    function showPoliticianUserInterface(userInfo) {
      document.getElementById('normalUserInterface').style.display = 'none';
      document.getElementById('politicianUserInterface').style.display = 'block';
      
      // ì •ì¹˜ì¸ ì •ë³´ ì„¤ì •
      document.getElementById('autoSelectedPoliticianPhoto').src = userInfo.photo;
      document.getElementById('autoSelectedPoliticianPhoto').alt = userInfo.name;
      document.getElementById('autoSelectedPoliticianName').textContent = userInfo.name;
      document.getElementById('autoSelectedPoliticianDetails').textContent = `${userInfo.party} Â· ${userInfo.position}`;
      document.getElementById('selectedPoliticianId').value = userInfo.politicianId;
      
      // ìë™ìœ¼ë¡œ ì •ì¹˜ì¸ ì„ íƒ
      selectedPolitician = {
        id: userInfo.politicianId,
        name: userInfo.name,
        party: userInfo.party,
        position: userInfo.position,
        photo: userInfo.photo
      };
      
      console.log('ğŸ”’ ì •ì¹˜ì¸ íšŒì› ì¸í„°í˜ì´ìŠ¤ í™œì„±í™”:', userInfo.name);
    }
    
    // ì¼ë°˜íšŒì›/ë³´ì¢Œì§„íšŒì›ìš© ì¸í„°í˜ì´ìŠ¤ í‘œì‹œ
    function showNormalUserInterface() {
      document.getElementById('normalUserInterface').style.display = 'block';
      document.getElementById('politicianUserInterface').style.display = 'none';
      
      console.log('ğŸ‘¤ ì¼ë°˜íšŒì›/ë³´ì¢Œì§„íšŒì› ì¸í„°í˜ì´ìŠ¤ í™œì„±í™”');
    }

    // ì •ì¹˜ì¸ ê²€ìƒ‰ ì´ˆê¸°í™”
    function initializePoliticianSearch() {
      const searchInput = document.getElementById('politicianSearch');
      const dropdown = document.getElementById('politicianDropdown');
      let selectedIndex = -1; // í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ìš© ì¸ë±ìŠ¤
      
      // ì •ì¹˜ì¸ íšŒì›ì¸ ê²½ìš° ê²€ìƒ‰ ê¸°ëŠ¥ ë¹„í™œì„±í™”
      const userInfo = getUserInfo();
      if (userInfo && userInfo.userType === 'politician') {
        return; // ì •ì¹˜ì¸ íšŒì›ì€ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
      }

      // í´ë¦­ ì‹œ ì „ì²´ ëª©ë¡ í‘œì‹œ
      searchInput.addEventListener('click', function() {
        displayAllPoliticians();
        dropdown.style.display = 'block';
        selectedIndex = -1;
      });

      searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase().trim();
        selectedIndex = -1; // ì…ë ¥ ì‹œ ì„ íƒ ì¸ë±ìŠ¤ ì´ˆê¸°í™”
        
        if (query.length === 0) {
          displayAllPoliticians();
          dropdown.style.display = 'block';
          return;
        }

        const filtered = politicians.filter(p => 
          p.name.toLowerCase().includes(query) || 
          p.party.toLowerCase().includes(query)
        );

        if (filtered.length > 0) {
          displayPoliticians(filtered, query);
        } else {
          // ë°ì´í„°ì— ì—†ëŠ” ì •ì¹˜ì¸ ì…ë ¥ ì‹œ ì»¤ìŠ¤í…€ ì˜µì…˜ í‘œì‹œ
          displayCustomPolitician(query);
        }
        dropdown.style.display = 'block';
      });

      // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ì²˜ë¦¬
      searchInput.addEventListener('keydown', function(e) {
        const items = dropdown.querySelectorAll('.politician-item, .no-politician-option');
        
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          selectedIndex = Math.min(selectedIndex + 1, items.length - 1);
          updateSelection(items);
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          selectedIndex = Math.max(selectedIndex - 1, -1);
          updateSelection(items);
        } else if (e.key === 'Enter') {
          e.preventDefault();
          
          if (selectedIndex >= 0 && items[selectedIndex]) {
            // í‚¤ë³´ë“œë¡œ ì„ íƒëœ í•­ëª© í´ë¦­
            items[selectedIndex].click();
          } else {
            // ì„ íƒëœ í•­ëª©ì´ ì—†ìœ¼ë©´ ì²« ë²ˆì§¸ í•­ëª© ì„ íƒ
            const query = this.value.trim();
            if (query && items.length > 0) {
              // "ì„ íƒ ì•ˆí•¨" ì˜µì…˜ì´ ì•„ë‹Œ ì²« ë²ˆì§¸ ì •ì¹˜ì¸ ì„ íƒ
              const firstPoliticianItem = dropdown.querySelector('.politician-item');
              if (firstPoliticianItem) {
                firstPoliticianItem.click();
              }
            }
          }
        } else if (e.key === 'Escape') {
          dropdown.style.display = 'none';
          selectedIndex = -1;
        }
      });

      searchInput.addEventListener('focus', function() {
        if (!this.value.trim()) {
          displayAllPoliticians();
          dropdown.style.display = 'block';
        }
        selectedIndex = -1;
      });

      // ì™¸ë¶€ í´ë¦­ ì‹œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
      document.addEventListener('click', function(e) {
        if (!searchInput.contains(e.target) && !dropdown.contains(e.target)) {
          dropdown.style.display = 'none';
          selectedIndex = -1;
        }
      });
    }

    // í‚¤ë³´ë“œ ì„ íƒ í‘œì‹œ ì—…ë°ì´íŠ¸
    function updateSelection(items) {
      items.forEach((item, index) => {
        if (index === selectedIndex) {
          item.style.backgroundColor = '#007bff';
          item.style.color = 'white';
        } else {
          item.style.backgroundColor = '';
          item.style.color = '';
        }
      });
    }

    function displayAllPoliticians() {
      displayPoliticians(politicians);
    }

    function displayPoliticians(politicianList, query = '') {
      const dropdown = document.getElementById('politicianDropdown');
      dropdown.innerHTML = '';

      // "ì„ íƒ ì•ˆí•¨" ì˜µì…˜ ì¶”ê°€
      const noneOption = document.createElement('div');
      noneOption.className = 'no-politician-option';
      noneOption.textContent = 'ì •ì¹˜ì¸ì„ ì„ íƒí•˜ì§€ ì•ŠìŒ';
      noneOption.addEventListener('click', () => clearPolitician());
      dropdown.appendChild(noneOption);

      politicianList.forEach(politician => {
        const item = document.createElement('div');
        item.className = 'politician-item';
        item.innerHTML = `
          <img src="${politician.photo}" alt="${politician.name}" class="politician-photo">
          <div class="politician-info">
            <div class="politician-name">${politician.name}</div>
            <div class="politician-party">${politician.party}</div>
            <div class="politician-position">${politician.position}</div>
          </div>
        `;

        item.addEventListener('click', () => selectPolitician(politician));
        dropdown.appendChild(item);
      });
    }

    function displayCustomPolitician(query) {
      const dropdown = document.getElementById('politicianDropdown');
      dropdown.innerHTML = '';

      // "ì„ íƒ ì•ˆí•¨" ì˜µì…˜ ì¶”ê°€
      const noneOption = document.createElement('div');
      noneOption.className = 'no-politician-option';
      noneOption.textContent = 'ì •ì¹˜ì¸ì„ ì„ íƒí•˜ì§€ ì•ŠìŒ';
      noneOption.addEventListener('click', () => clearPolitician());
      dropdown.appendChild(noneOption);

      // ì»¤ìŠ¤í…€ ì •ì¹˜ì¸ ìƒì„±
      const customPolitician = {
        id: 'custom_' + Date.now(),
        name: query,
        party: 'ì •ë‹¹ ë¯¸ìƒ',
        position: 'ì •ì¹˜ì¸',
        photo: 'https://via.placeholder.com/100x100/6c757d/FFFFFF?text=' + encodeURIComponent(query.charAt(0))
      };

      const item = document.createElement('div');
      item.className = 'politician-item';
      item.innerHTML = `
        <img src="${customPolitician.photo}" alt="${customPolitician.name}" class="politician-photo">
        <div class="politician-info">
          <div class="politician-name">${customPolitician.name}</div>
          <div class="politician-party">${customPolitician.party}</div>
          <div class="politician-position">${customPolitician.position}</div>
        </div>
      `;

      item.addEventListener('click', () => selectPolitician(customPolitician));
      dropdown.appendChild(item);
    }

    function clearPolitician() {
      selectedPolitician = null;
      document.getElementById('politicianSearch').value = '';
      document.getElementById('selectedPoliticianId').value = '';
      
      // UI ì „í™˜
      document.getElementById('politicianSearchContainer').style.display = 'block';
      document.getElementById('selectedPoliticianContainer').style.display = 'none';
      document.getElementById('politicianDropdown').style.display = 'none';
    }

    function selectPolitician(politician) {
      selectedPolitician = politician;
      
      // ì„ íƒëœ ì •ì¹˜ì¸ í‘œì‹œ
      document.getElementById('selectedPoliticianPhoto').src = politician.photo;
      document.getElementById('selectedPoliticianPhoto').alt = politician.name;
      document.getElementById('selectedPoliticianName').textContent = politician.name;
      document.getElementById('selectedPoliticianDetails').textContent = `${politician.party} Â· ${politician.position}`;
      document.getElementById('selectedPoliticianId').value = politician.id;
      
      // UI ì „í™˜
      document.getElementById('politicianSearchContainer').style.display = 'none';
      document.getElementById('selectedPoliticianContainer').style.display = 'block';
      document.getElementById('politicianDropdown').style.display = 'none';
    }

    function changePolitician() {
      selectedPolitician = null;
      document.getElementById('politicianSearch').value = '';
      document.getElementById('selectedPoliticianId').value = '';
      
      // UI ì „í™˜
      document.getElementById('politicianSearchContainer').style.display = 'block';
      document.getElementById('selectedPoliticianContainer').style.display = 'none';
      document.getElementById('politicianSearch').focus();
    }
    
    // ==================== ì •ì¹˜ì¸ ëª…í•¨ ì¹´ë“œ í¼ ì œì–´ ====================
    
    /**
     * ì •ì¹˜ì¸ ê³„ì • ì—¬ë¶€ í™•ì¸ ë° ëª…í•¨ ì¹´ë“œ í¼ í‘œì‹œ/ìˆ¨ê¹€
     */
    function togglePoliticianCardForm() {
      const politicianCardSection = document.getElementById('politicianCardSection');
      const userType = localStorage.getItem('userType') || sessionStorage.getItem('userType');
      
      // ì •ì¹˜ì¸, êµ­íšŒì˜ì›, ë³´ì¢Œê´€ì¸ ê²½ìš°ì—ë§Œ ëª…í•¨ ì¹´ë“œ í¼ í‘œì‹œ
      if (['politician', 'mp', 'staff'].includes(userType)) {
        politicianCardSection.style.display = 'block';
        
        // ê¸°ì¡´ ì‚¬ìš©ì ì •ë³´ë¡œ í¼ ë¯¸ë¦¬ ì±„ìš°ê¸°
        populatePoliticianCardForm();
      } else {
        politicianCardSection.style.display = 'none';
      }
    }
    
    /**
     * ê¸°ì¡´ ì‚¬ìš©ì ì •ë³´ë¡œ ëª…í•¨ ì¹´ë“œ í¼ ë¯¸ë¦¬ ì±„ìš°ê¸°
     */
    function populatePoliticianCardForm() {
      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê¸°ì¡´ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      const storedData = JSON.parse(localStorage.getItem('politicianCardData') || '{}');
      
      if (storedData.name) {
        document.getElementById('politicianName').value = storedData.name;
      }
      if (storedData.title) {
        document.getElementById('politicianTitle').value = storedData.title;
      }
      if (storedData.party) {
        document.getElementById('politicianParty').value = storedData.party;
      }
      if (storedData.email) {
        document.getElementById('politicianEmail').value = storedData.email;
      }
      if (storedData.website) {
        document.getElementById('politicianWebsite').value = storedData.website;
      }
      if (storedData.youtube) {
        document.getElementById('politicianYoutube').value = storedData.youtube;
      }
      if (storedData.youtubeName) {
        document.getElementById('politicianYoutubeName').value = storedData.youtubeName;
      }
      if (storedData.bankAccount) {
        document.getElementById('politicianBankAccount').value = storedData.bankAccount;
      }
      if (storedData.motto) {
        document.getElementById('politicianMotto').value = storedData.motto;
      }
    }
    
    /**
     * ëª…í•¨ ì¹´ë“œ í¼ ë°ì´í„° ì €ì¥
     */
    function savePoliticianCardData() {
      const formData = {
        name: document.getElementById('politicianName').value,
        title: document.getElementById('politicianTitle').value,
        party: document.getElementById('politicianParty').value,
        email: document.getElementById('politicianEmail').value,
        website: document.getElementById('politicianWebsite').value,
        youtube: document.getElementById('politicianYoutube').value,
        youtubeName: document.getElementById('politicianYoutubeName').value,
        bankAccount: document.getElementById('politicianBankAccount').value,
        motto: document.getElementById('politicianMotto').value
      };
      
      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
      localStorage.setItem('politicianCardData', JSON.stringify(formData));
      
      return formData;
    }
    
    // ì§€ì—­êµ¬ ìë™ì™„ì„± ì´ˆê¸°í™”
    function initializeDistrictAutocomplete() {
      const districtInput = document.getElementById("district");
      const autocompleteList = document.getElementById("autocomplete-list");

      // ì§€ì—­êµ¬ ê³µê°œ/ë¹„ê³µê°œ ë¼ë””ì˜¤ ë²„íŠ¼ ì´ë²¤íŠ¸ ì¶”ê°€
      const visibilityRadios = document.querySelectorAll('input[name="districtVisibility"]');
      visibilityRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          if (this.value === 'private') {
            districtInput.value = 'ë¹„ê³µê°œ';
            districtInput.readOnly = true;
            districtInput.style.background = '#f8f9fa';
            districtInput.style.color = '#666';
            autocompleteList.innerHTML = "";
          } else {
            const defaultDistrict = localStorage.getItem('userDistrict') || sessionStorage.getItem('userDistrict') || 'ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬';
            districtInput.value = defaultDistrict;
            districtInput.readOnly = false;
            districtInput.style.background = 'white';
            districtInput.style.color = '#333';
          }
        });
      });

      // ìë™ì™„ì„± í•„í„°ë§
      districtInput.addEventListener("input", function () {
        // ë¹„ê³µê°œ ëª¨ë“œì—ì„œëŠ” ì…ë ¥ ë¬´ì‹œ
        if (document.querySelector('input[name="districtVisibility"]:checked').value === 'private') {
          return;
        }
        
        const value = this.value.toLowerCase();
        autocompleteList.innerHTML = "";

        if (!value) return;

        const filtered = districts.filter(d => d.toLowerCase().includes(value)).slice(0, 10);

        filtered.forEach(item => {
          const div = document.createElement("div");
          div.classList.add("autocomplete-item");
          div.textContent = item;
          div.addEventListener("click", () => {
            districtInput.value = item;
            autocompleteList.innerHTML = "";
          });
          autocompleteList.appendChild(div);
        });
      });

      // ì…ë ¥ í•„ë“œ í¬ì»¤ìŠ¤ ì‹œ ì „ì²´ ëª©ë¡ í‘œì‹œ
      districtInput.addEventListener("focus", function () {
        // ë¹„ê³µê°œ ëª¨ë“œì—ì„œëŠ” ìë™ì™„ì„± í‘œì‹œ ì•ˆí•¨
        if (document.querySelector('input[name="districtVisibility"]:checked').value === 'private') {
          return;
        }
        
        const defaultDistrict = localStorage.getItem('userDistrict') || sessionStorage.getItem('userDistrict') || 'ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬';
        if (!this.value || this.value === defaultDistrict) {
          showAutocompleteList("");
        }
      });

      // ì™¸ë¶€ í´ë¦­ ì‹œ ìë™ì™„ì„± ë‹«ê¸°
      document.addEventListener("click", function (e) {
        if (!autocompleteList.contains(e.target) && e.target !== districtInput) {
          autocompleteList.innerHTML = "";
        }
      });
    }

    function showAutocompleteList(value) {
      const autocompleteList = document.getElementById("autocomplete-list");
      
      // ë¹„ê³µê°œ ëª¨ë“œì—ì„œëŠ” ìë™ì™„ì„± í‘œì‹œ ì•ˆí•¨
      if (document.querySelector('input[name="districtVisibility"]:checked').value === 'private') {
        return;
      }
      
      autocompleteList.innerHTML = "";
      
      const filtered = value
        ? districts.filter(d => d.toLowerCase().includes(value.toLowerCase()))
        : districts;

      filtered.slice(0, 15).forEach(item => {
        const div = document.createElement("div");
        div.classList.add("autocomplete-item");
        div.textContent = item;
        div.addEventListener("click", () => {
          document.getElementById("district").value = item;
          autocompleteList.innerHTML = "";
        });
        autocompleteList.appendChild(div);
      });
    }
    
    // Toast UI Editor ì´ˆê¸°í™”
    let editor;
    function initializeEditor() {
      editor = new toastui.Editor({
        el: document.querySelector('#editor'),
        height: '500px',
        initialEditType: 'wysiwyg',
        previewStyle: 'vertical',
        language: 'ko'
      });
    }
    
    // í¼ ì œì¶œ ì²˜ë¦¬
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ¯ DOM ë¡œë“œ ì™„ë£Œ - ì •ì¹˜ì¸ ì†Œí†µ ê¸€ì“°ê¸° í˜ì´ì§€ ì´ˆê¸°í™”');
      initializePage();
      
      const form = document.getElementById('writeForm');
      if (form) {
        form.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // ì •ì¹˜ì¸ ì„ íƒ ì—¬ë¶€ í™•ì¸ (ì„ íƒì‚¬í•­ì´ë¯€ë¡œ ì²´í¬í•˜ì§€ ì•ŠìŒ)
          
          // ì •ì¹˜ì¸ íšŒì›ì¸ ê²½ìš° ìë™ ì„ íƒëœ ì •ì¹˜ì¸ ì •ë³´ í™•ì¸
          const userInfo = getUserInfo();
          if (userInfo && userInfo.userType === 'politician' && !selectedPolitician) {
            // ì •ì¹˜ì¸ íšŒì›ì´ì§€ë§Œ selectedPoliticianì´ ì—†ëŠ” ê²½ìš° ìë™ ì„¤ì •
            selectedPolitician = {
              id: userInfo.politicianId,
              name: userInfo.name,
              party: userInfo.party,
              position: userInfo.position,
              photo: userInfo.photo
            };
          }
          
          // ì—ë””í„° ë‚´ìš© ê°€ì ¸ì˜¤ê¸°
          const htmlContent = editor.getHTML();
          document.getElementById('hiddenContent').value = htmlContent;
          
          const submitBtn = form.querySelector('.write-button');
          submitBtn.disabled = true;
          submitBtn.textContent = 'ë“±ë¡ ì¤‘...';
          
          // ê²Œì‹œê¸€ ë°ì´í„° ìˆ˜ì§‘
          const isDistrictPublic = document.querySelector('input[name="districtVisibility"]:checked').value === 'public';
          const districtValue = isDistrictPublic ? document.getElementById('district').value : '';
          
          // ì‚¬ìš©ì ì •ë³´ (ìµëª…ìœ¼ë¡œ ì„¤ì •)
          const userNickname = 'ìµëª…';
          const userEmail = '';
          
          // ëª…í•¨ ì¹´ë“œ ë°ì´í„° ìˆ˜ì§‘ (ì •ì¹˜ì¸ ê³„ì •ì¸ ê²½ìš°)
          let politicianCardData = null;
          const userType = localStorage.getItem('userType') || sessionStorage.getItem('userType');
          if (['politician', 'mp', 'staff'].includes(userType)) {
            politicianCardData = savePoliticianCardData();
            console.log('ğŸ“‹ ëª…í•¨ ì¹´ë“œ ë°ì´í„°:', politicianCardData);
          }
          
          const postData = {
            title: document.getElementById('title').value,
            content: htmlContent,
            district: districtValue,
            showDistrict: isDistrictPublic,
            politician: selectedPolitician || null, // ì„ íƒí•˜ì§€ ì•Šìœ¼ë©´ null
            author: userNickname,
            email: userEmail,
            timestamp: new Date().toISOString(),
            politicianCard: politicianCardData // ëª…í•¨ ì¹´ë“œ ë°ì´í„° ì¶”ê°€
          };
          
          console.log('ğŸ“ ì •ì¹˜ì¸ ì†Œí†µ ê²Œì‹œê¸€ ë°ì´í„°:', postData);
          
          // ì‹¤ì œë¡œëŠ” ì„œë²„ë¡œ ë°ì´í„° ì „ì†¡
          setTimeout(() => {
            alert('ì •ì¹˜ì¸ ì†Œí†µ ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
            submitBtn.disabled = false;
            submitBtn.textContent = 'ë“±ë¡í•˜ê¸°';
            
            // ê²Œì‹œíŒ ëª©ë¡ìœ¼ë¡œ ì´ë™
            window.location.href = 'voice.html';
          }, 1500);
        });
      }
    });
    

  </script>
  
  <!-- JavaScript ì¸í´ë£¨ë“œ ì½”ë“œ -->
  <script>
    function includeHTML(id, file) {
      fetch(file)
      .then(response => response.text())
      .then(data => {
        document.getElementById(id).innerHTML = data;
        console.log('âœ… ' + file + ' í¬í•¨ ì™„ë£Œ');
      })
      .catch(error => {
        console.error('âŒ íŒŒì¼ ë¡œë”© ì‹¤íŒ¨:', error);
      });
    }

    includeHTML("header-include", "header.html");
    includeHTML("footer-include", "footer.html");
  </script>
<!-- ğŸ†• ìƒˆë¡œìš´ ë¡œê·¸ì¸ ì‹œìŠ¤í…œ - í˜ì´ì§€ ê´€ë¦¬ì -->
<script src="page-manager.js"></script>
</body>
</html>